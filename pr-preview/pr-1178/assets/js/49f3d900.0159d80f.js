"use strict";(self.webpackChunkopenfga_dev=self.webpackChunkopenfga_dev||[]).push([[2022],{31581:e=>{e.exports=JSON.parse('{"permalink":"/pr-preview/pr-1178/blog/ignore-duplicate-writes-announcement","source":"@site/blog/ignore-duplicate-writes-announcement.md","title":"Ignore Duplicate Tuples On Write","description":"OpenFGA now supports ignoring duplicate writes and missing deletes, making data imports much easier and more efficient.","date":"2025-10-31T00:00:00.000Z","tags":[{"inline":true,"label":"openfga","permalink":"/pr-preview/pr-1178/blog/tags/openfga"},{"inline":true,"label":"features","permalink":"/pr-preview/pr-1178/blog/tags/features"},{"inline":true,"label":"api","permalink":"/pr-preview/pr-1178/blog/tags/api"}],"readingTime":2.22,"hasTruncateMarker":false,"authors":[{"name":"Tyler Nix","title":"Product Manager","url":"https://github.com/tylernix","imageURL":"/pr-preview/pr-1178/img/blog/authors/tyler.jpg","key":"tylernix","page":null}],"frontMatter":{"title":"Ignore Duplicate Tuples On Write","description":"OpenFGA now supports ignoring duplicate writes and missing deletes, making data imports much easier and more efficient.","slug":"ignore-duplicate-writes-announcement","date":"2025-10-31T00:00:00.000Z","authors":"tylernix","tags":["openfga","features","api"],"image":"https://openfga.dev/img/og-rich-embed.png","hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"OpenFGA Accepted into CNCF Incubation \ud83c\udf89","permalink":"/pr-preview/pr-1178/blog/incubation-announcement"},"nextItem":{"title":"Fine-Grained News - October 2025","permalink":"/pr-preview/pr-1178/blog/fine-grained-news-2025-10"}}')},69431:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var i=n(31581),r=n(74848),s=n(28453),o=n(25558);const a={title:"Ignore Duplicate Tuples On Write",description:"OpenFGA now supports ignoring duplicate writes and missing deletes, making data imports much easier and more efficient.",slug:"ignore-duplicate-writes-announcement",date:new Date("2025-10-31T00:00:00.000Z"),authors:"tylernix",tags:["openfga","features","api"],image:"https://openfga.dev/img/og-rich-embed.png",hide_table_of_contents:!1},l='Announcing "Ignore Duplicate Writes" in OpenFGA',p={authorsImageUrls:[void 0]},d=[{value:"The Problem",id:"the-problem",level:2},{value:"The Solution",id:"the-solution",level:2},{value:"See it in Action",id:"see-it-in-action",level:2},{value:"Get Started",id:"get-started",level:2},{value:"We want your feedback!",id:"we-want-your-feedback",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["We've added two new optional parameters to the Write API endpoint to improve the experience of writing data to FGA. You can now gracefully ",(0,r.jsx)(t.a,{href:"https://openfga.dev/docs/getting-started/update-tuples#05-ignoring-duplicate-or-missing-tuples",children:'"ignore" duplicate writes and missing deletes'}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,r.jsxs)(t.p,{children:["When you're writing tuples to OpenFGA, it's almost inevitable that you'll try to write a relationship tuple that already exists (e.g., ",(0,r.jsx)(t.code,{children:"user:anne"})," is already a ",(0,r.jsx)(t.code,{children:"viewer"})," of ",(0,r.jsx)(t.code,{children:"document:123"}),") or try to delete one that's already gone. In the past, OpenFGA would reject the entire Write request containing that single duplicate operation."]}),"\n",(0,r.jsx)(t.p,{children:"This forced developers to build complex error-handling and retry logic on the client-side, just to filter out the single problematic tuple and resend the rest of the batch. This adds latency and operational overhead."}),"\n",(0,r.jsx)(t.h2,{id:"the-solution",children:"The Solution"}),"\n",(0,r.jsx)(t.p,{children:"The Write API now accepts two new optional parameters to gracefully handle these use cases:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:'on_duplicate: "ignore"'})}),": When included in the ",(0,r.jsx)(t.code,{children:"writes"})," section, this tells OpenFGA to simply skip any tuples that already exist instead of failing the request."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:'on_missing: "ignore"'})}),": When included in the ",(0,r.jsx)(t.code,{children:"deletes"})," section, this tells OpenFGA to skip any tuples that don't exist."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Now, you can send large batches of writes and deletes without worrying about these common conditions breaking your import."}),"\n",(0,r.jsx)(t.h2,{id:"see-it-in-action",children:"See it in Action"}),"\n",(0,r.jsx)(t.p,{children:"For writes:"}),"\n",(0,r.jsx)(o.dp,{relationshipTuples:[{user:"user:anne",relation:"viewer",object:"document:roadmap"}],conflictOptions:{onDuplicateWrites:"ignore"},skipSetup:!0,allowedLanguages:[o.NH.JS_SDK,o.NH.GO_SDK,o.NH.DOTNET_SDK,o.NH.PYTHON_SDK,o.NH.JAVA_SDK,o.NH.CLI,o.NH.CURL]}),"\n",(0,r.jsx)(t.p,{children:"And deletes:"}),"\n",(0,r.jsx)(o.dp,{deleteRelationshipTuples:[{user:"user:anne",relation:"owner",object:"document:roadmap"}],conflictOptions:{onMissingDeletes:"ignore"},skipSetup:!0,allowedLanguages:[o.NH.JS_SDK,o.NH.GO_SDK,o.NH.DOTNET_SDK,o.NH.PYTHON_SDK,o.NH.JAVA_SDK,o.NH.CLI,o.NH.CURL]}),"\n",(0,r.jsx)(t.h2,{id:"get-started",children:"Get Started"}),"\n",(0,r.jsx)(t.p,{children:"This is supported in the latest versions of the OpenFGA API, SDKs and CLI. Try it out and let us know what you think!"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://openfga.dev/api/service#/Relationship%20Tuples/Write",children:"API Docs"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/openfga/js-sdk?tab=readme-ov-file#conflict-options-for-write-operations",children:"JavaScript SDK"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/openfga/go-sdk?tab=readme-ov-file#conflict-options-for-write-operations",children:"Go SDK"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/openfga/dotnet-sdk?tab=readme-ov-file#conflict-options-for-write-operations",children:".NET SDK"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/openfga/python-sdk?tab=readme-ov-file#conflict-options-for-write-operations",children:"Python SDK"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/openfga/java-sdk?tab=readme-ov-file#conflict-options-for-write-operations",children:"Java SDK"})}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Special thanks to ",(0,r.jsx)(t.a,{href:"https://github.com/phamhieu",children:"@phamhieu"})," for his ",(0,r.jsx)(t.a,{href:"https://github.com/openfga/js-sdk/pull/276",children:"contribution"})," to the JavaScript SDK! \ud83d\ude4f"]}),"\n",(0,r.jsxs)(t.p,{children:["Learn more about ",(0,r.jsx)(t.a,{href:"https://openfga.dev/docs/getting-started/update-tuples#05-ignoring-duplicate-or-missing-tuples",children:"Writing Tuples in OpenFGA"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"we-want-your-feedback",children:"We want your feedback!"}),"\n",(0,r.jsxs)(t.p,{children:["Please reach out through our ",(0,r.jsx)(t.a,{href:"https://openfga.dev/docs/community",children:"community channels"})," with any questions or feedback."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);