<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content/modeling/getting-started" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Get Started with Modeling | OpenFGA</title><meta data-rh="true" http-equiv="Content-Security-Policy" content="default-src &#x27;none&#x27;; base-uri &#x27;self&#x27;; block-all-mixed-content; child-src www.youtube-nocookie.com; prefetch-src &#x27;self&#x27;; connect-src &#x27;self&#x27; https://raw.githubusercontent.com https://s3.amazonaws.com https://cdn.cookielaw.org https://privacyportal.onetrust.com https://heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://forms.hscollectedforms.net ; font-src &#x27;self&#x27; https://fonts.googleapis.com https://fonts.gstatic.com; form-action &#x27;none&#x27;; frame-src www.youtube-nocookie.com; img-src &#x27;self&#x27; data: https://pbs.twimg.com https://docs.github.com https://heapanalytics.com https://forms.hsforms.com https://track.hubspot.com ; media-src &#x27;self&#x27;; object-src &#x27;none&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://cdn.cookielaw.org https://geolocation.onetrust.com https://cdn.heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com; style-src &#x27;unsafe-inline&#x27; &#x27;self&#x27; https://fonts.googleapis.com;"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openfga.dev/pr-preview/pr-956/docs/modeling/getting-started"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="OpenFGA, open source, fine-grained-authorization, fine grained authorization, Zanzibar"><meta data-rh="true" property="og:image" content="https://openfga.dev/img/og-rich-embed.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Get Started with Modeling | OpenFGA"><meta data-rh="true" name="description" content="An introduction to modeling"><meta data-rh="true" property="og:description" content="An introduction to modeling"><link data-rh="true" rel="icon" href="/pr-preview/pr-956/img/openfga-icon.svg"><link data-rh="true" rel="canonical" href="https://openfga.dev/pr-preview/pr-956/docs/modeling/getting-started"><link data-rh="true" rel="alternate" href="https://openfga.dev/pr-preview/pr-956/docs/modeling/getting-started" hreflang="en"><link data-rh="true" rel="alternate" href="https://openfga.dev/pr-preview/pr-956/docs/modeling/getting-started" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/pr-preview/pr-956/blog/rss.xml" title="OpenFGA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pr-preview/pr-956/blog/atom.xml" title="OpenFGA Atom Feed">







<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"><link rel="stylesheet" href="/pr-preview/pr-956/assets/css/styles.fdcc7791.css">
<script src="/pr-preview/pr-956/assets/js/runtime~main.23ad206c.js" defer="defer"></script>
<script src="/pr-preview/pr-956/assets/js/main.804e86fb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div class="CustomizedRoot"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/pr-preview/pr-956/"><div class="navbar__logo"><img src="/pr-preview/pr-956/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/pr-956/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-956/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-956/docs/fga">Docs</a><a class="navbar__item navbar__link" href="/pr-preview/pr-956/api/service">API</a><a class="navbar__item navbar__link" href="/pr-preview/pr-956/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openfga/openfga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-956/docs/fga">What is OpenFGA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-956/docs/authorization-concepts">Authorization Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-956/docs/concepts">OpenFGA Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-956/docs/configuration-language">Configuration Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-956/docs/community">Community</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-956/docs/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/setup-openfga/overview">Setup OpenFGA</a><button aria-label="Expand sidebar category &#x27;Setup OpenFGA&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/install-sdk">Install SDK Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/create-store">Create a Store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/setup-sdk-client">Setup SDK Client for Store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/configure-model">Configure Authorization Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/update-tuples">Update Relationship Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/perform-check">Perform a Check</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/perform-list-objects">Perform a List Objects Request</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/perform-list-users">Perform a List Users Request</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/cli">Use the FGA CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/framework">Integrate Within a Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/immutable-models">Immutable Authorization Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/running-in-production">Production Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/tuples-api-best-practices">Implementation Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/getting-started/configure-telemetry">Configure SDK Client Telemetry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/pr-preview/pr-956/docs/modeling">Modeling Guides</a><button aria-label="Collapse sidebar category &#x27;Modeling Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-956/docs/modeling/getting-started">Get Started with Modeling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/direct-access">Direct Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/user-groups">User Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/roles-and-permissions">Roles and Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/parent-child">Parent-Child Objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/blocklists">Blocklists</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/public-access">Public Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/multiple-restrictions">Multiple Restrictions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/custom-roles">Custom Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/conditions">Conditions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/token-claims-contextual-tuples">Token claims as Contextual Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/contextual-time-based-authorization">Contextual and Time-Based Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/organization-context-authorization">Authorization Through Organization Context</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/testing">Testing Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-956/docs/modeling/modular-models">Modular Models</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-956/docs/modeling/building-blocks">Building Blocks</a><button aria-label="Expand sidebar category &#x27;Building Blocks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-956/docs/modeling/advanced">Advanced Use-Cases</a><button aria-label="Expand sidebar category &#x27;Advanced Use-Cases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-956/docs/modeling/migrating">Migrations</a><button aria-label="Expand sidebar category &#x27;Migrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-956/docs/interacting">Interacting with the API</a><button aria-label="Expand sidebar category &#x27;Interacting with the API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-956/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-956/docs/modeling"><span itemprop="name">Modeling Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Get Started with Modeling</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Get Started with Modeling</h1></header>
<!-- -->
<p>Creating a <a href="/pr-preview/pr-956/docs/authorization-concepts#what-is-relationship-based-access-control">Relationship Based Access Control (ReBAC)</a> authorization model might feel odd at first. Most of us tend to think about authorization models in terms of roles and permissions. After all, most software works like that. Your existing systems are likely built on a model using roles and permissions.</p>
<p>This guide outlines a process for defining your <a href="/pr-preview/pr-956/docs/concepts#what-is-an-authorization-model">authorization model</a> with <a href="/pr-preview/pr-956/docs/fga">OpenFGA</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-modeling">Introduction To Modeling<a href="#introduction-to-modeling" class="hash-link" aria-label="Direct link to Introduction To Modeling" title="Direct link to Introduction To Modeling">​</a></h2>
<p>To define a ReBAC model in <!-- -->OpenFGA<!-- --> we recommend:</p>
<ul>
<li>If you have an existing system: forget about how your system works today and start thinking about how you want it to work in the future.</li>
<li>Thinking about authorization starting from the resources, or objects as <!-- -->OpenFGA<!-- --> calls them.</li>
</ul>
<p>If that sounds hard, don&#x27;t worry! We&#x27;ll guide you through it.</p>
<p>OpenFGA<!-- --> is built to quickly and reliably make <a href="/pr-preview/pr-956/docs/concepts#what-is-a-check-request">authorization checks</a>
. This means providing an answer to a question: &quot;Can user U perform action A on object O?&quot;</p>
<p>ReBAC systems determine access from a <a href="/pr-preview/pr-956/docs/concepts#what-is-a-user">user&#x27;s</a> <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation</a> to an <a href="/pr-preview/pr-956/docs/concepts#what-is-an-object">object</a>. Authorization decisions are then yes or no answers to the question: &quot;Does user U have relation R with object O?&quot;.</p>
<div style="margin-top:2rem;margin-bottom:2rem" class="column-layout-2_O2db"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">General Authorization Check</span><div class="documentation-card-box-children_i280"><p>&quot;Can user <b>U</b> <u>perform an action</u> <b>A</b> on object <b>O</b>?&quot;</p></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">OpenFGA (ReBAC) Authorization Check</span><div class="documentation-card-box-children_i280"><p>&quot;Does user <b>U</b> <u>have relation</u> <b>R</b> with object <b>O</b>?&quot;</p></div></div></div></div>
<p>In the previous example, a relation R should be defined that implies permission to action A. For example:</p>
<div style="margin-top:2rem;margin-bottom:2rem" class="column-layout-2_O2db"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">General Authorization Check</span><div class="documentation-card-box-children_i280"><p>&quot;Can user <b>Jane</b> <u>perform action</u> <b>view</b> on object <b>project sandcastle</b>?&quot;</p></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">OpenFGA (ReBAC) Authorization Check</span><div class="documentation-card-box-children_i280"><p>&quot;Can user <b>Jane</b> <u>have relation</u> <b>view</b> with object <b>project sandcastle</b>?&quot;</p></div></div></div></div>
<p>We&#x27;ll provide more detailed examples throughout this article.</p>
<p>When you are modeling, you need to answer a more general question:</p>
<div style="margin-top:2rem;margin-bottom:2rem"><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon-large_nsCS"><svg xmlns="http://www.w3.org/2000/svg" width="106" height="106" fill="none" viewBox="0 0 106 106"><rect width="105.948" height="105.948" y="0.026" fill="#BEC4CE" rx="20.252"></rect><path fill="#2D2D37" d="M64.013 73.904c-7.832 0-14.18-6.349-14.18-14.18 0-7.832 6.348-14.18 14.18-14.18s14.18 6.348 14.18 14.18-6.348 14.18-14.18 14.18"></path><path fill="url(#a)" d="M31.194 12.758h44.687c7.813 0 14.145 6.347 14.145 14.177v.006c0 7.83-6.332 14.177-14.145 14.177H31.194c-7.812 0-14.144-6.347-14.144-14.177v-.006c0-7.83 6.332-14.177 14.144-14.177"></path><path fill="url(#b)" d="M45.408 26.903v52.166c0 7.812-6.347 14.145-14.178 14.145h-.005c-7.83 0-14.178-6.333-14.178-14.145V26.903c0-7.812 6.348-14.145 14.178-14.145h.005c7.83 0 14.178 6.333 14.178 14.145"></path><path fill="#fff" d="M31.228 93.243c-7.832 0-14.18-6.35-14.18-14.181 0-7.832 6.348-14.18 14.18-14.18s14.18 6.348 14.18 14.18-6.349 14.18-14.18 14.18"></path><path fill="#000" d="M64.03 73.938c7.832 0 14.18-6.35 14.18-14.18 0-7.833-6.348-14.181-14.18-14.181s-14.18 6.349-14.18 14.18c0 7.832 6.348 14.18 14.18 14.18"></path><defs><linearGradient id="a" x1="90.016" x2="17.04" y1="26.938" y2="26.938" gradientUnits="userSpaceOnUse"><stop stop-color="#635DFF"></stop><stop offset="1" stop-color="#3885FF"></stop></linearGradient><linearGradient id="b" x1="31.228" x2="31.228" y1="93.217" y2="12.762" gradientUnits="userSpaceOnUse"><stop stop-color="#FF4F40"></stop><stop offset="1" stop-color="#F4D"></stop></linearGradient></defs></svg></div><span class="documentation-card-box-icon-title_zmVE">Why could user U perform an action A on an object O?</span></div><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>If you can answer that question for all types of objects in your system, then you can codify that into an authorization model.</p>
<p>Let&#x27;s get started!</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-process-for-defining-authorization-models">A Process For Defining Authorization Models<a href="#a-process-for-defining-authorization-models" class="hash-link" aria-label="Direct link to A Process For Defining Authorization Models" title="Direct link to A Process For Defining Authorization Models">​</a></h2>
<p>Defining an authorization model requires codifying an answer to the question &quot;why could user U perform an action A on an object O?&quot; for all use cases or actions in your system. This is an iterative process. For the purpose of this guide, we&#x27;ll go through one iteration of this process using a simplified Google Drive like system as an example.</p>
<p>Steps for defining your authorization model:</p>
<ol>
<li><a href="#01-pick-the-most-important-feature">Pick the most important feature</a></li>
<li><a href="#02-list-the-object-types">List the object types</a></li>
<li><a href="#03-list-relations-for-those-types">List relations for those types</a></li>
<li><a href="#04-define-relations">Define relations</a></li>
<li><a href="#05-test-the-model">Test the model</a></li>
<li><a href="#06-iterate">Iterate</a></li>
</ol>
<p><img decoding="async" loading="lazy" alt="The starting point" src="/pr-preview/pr-956/assets/images/getting-started-diagram-01-55e7a873e7fdd4aa810922af9606ad0c.svg" width="911" height="188" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="01-pick-the-most-important-feature">01. Pick The Most Important Feature<a href="#01-pick-the-most-important-feature" class="hash-link" aria-label="Direct link to 01. Pick The Most Important Feature" title="Direct link to 01. Pick The Most Important Feature">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Pick the most important feature" src="/pr-preview/pr-956/assets/images/getting-started-diagram-02-46c38ef0a05b5eac7e8a85c3ca02e20f.svg" width="911" height="188" class="img_ev3q"></p>
<p>A feature, in the context of this document, is an action or related set of actions your users can perform in your system. We&#x27;ll introduce an example feature later in this section.</p>
<p>Start with the most important feature. It doesn&#x27;t have to be the most complex one, but it should be the most important one. You&#x27;re probably more familiar with the authorization requirements for this feature than other less important use cases.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><ul>
<li>Requirement clarity is fundamental when defining an authorization model.</li>
<li>The scope of the feature is not important at this point. You can always iterate later.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="write-it-in-plain-language">Write It In Plain Language<a href="#write-it-in-plain-language" class="hash-link" aria-label="Direct link to Write It In Plain Language" title="Direct link to Write It In Plain Language">​</a></h4>
<p>Once you&#x27;ve picked a feature, describe its authorization related scope using simple language. Avoid using the word &quot;roles&quot;, as this ties you to an RBAC way of thinking.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Roles don&#x27;t &quot;disappear&quot; in ReBAC systems like <!-- -->OpenFGA<!-- -->. Your users might <a href="/pr-preview/pr-956/docs/modeling/roles-and-permissions">have roles on a given object, rather than the entire system</a>. But starting from the term &quot;role&quot; might lead you down the wrong path. Instead it is better to discover roles while you are modeling.</p></div></div>
<p>Your feature description should include the <a href="/pr-preview/pr-956/docs/concepts#what-is-an-object">objects</a>, <a href="/pr-preview/pr-956/docs/concepts#what-is-a-user">users</a> and <a href="/pr-preview/pr-956/docs/concepts#what-is-a-user">groups of users</a> participating in the system. Sentences should look like this:</p>
<div style="margin-bottom:2rem"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title-center_Hqm8">A user {user} can perform action {action} to/on/in {object types} ... IF {conditions}</span><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>Let&#x27;s look at an example of a simplified Google Drive like system. We&#x27;ll focus on the feature allowing users to create, read,
update, delete, and share documents with other users.</p>
<br>
<br>
<p>This feature can be described with these sentences:</p>
<div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-children-mono_WQfY"><ul>
<li>A user can create a document in a drive if they are the owner of the drive.</li>
<li>A user can create a folder in a drive if they are the owner of the drive.</li>
<li>A user can create a document in a folder if they are the owner of the folder. The folder is the parent of the document.</li>
<li>A user can create a folder in a folder if they are the owner of the folder. The existing folder is the parent of the new folder.</li>
</ul><hr><ul>
<li>A user can share a document with another user or an organization as either editor or viewer if they are an owner or editor of a document or if they are an owner of the folder/drive that is the parent of the document.</li>
</ul><hr><ul>
<li>A user can share a folder with another user or an organization as a viewer if they are an owner of the folder.</li>
</ul><hr><ul>
<li>A user can view a document if they are an owner, viewer or editor of the document or if they are a viewer or owner of the folder/drive that is the parent of the document.</li>
</ul><hr><ul>
<li>A user can edit a document if they are an owner or editor of the document or if they are an owner of the folder/drive that is the parent of the document.</li>
</ul><hr><ul>
<li>A user can change the owner of a document if they are an owner of the document.</li>
</ul><hr><ul>
<li>A user can change the owner of a folder if they are an owner of the folder.</li>
</ul><hr><ul>
<li>
<p>A user can be a member of an organization.</p>
<span style="color:gray"><p>How a user is added as a member to an organization is beyond the scope of the feature we picked to write down.</p></span>
</li>
</ul><hr><ul>
<li>A user can view a folder if they are the owner of the folder, or a viewer or owner of either the parent folder of the folder, or the parent drive of the folder.</li>
</ul></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-list-the-object-types">02. List The Object Types<a href="#02-list-the-object-types" class="hash-link" aria-label="Direct link to 02. List The Object Types" title="Direct link to 02. List The Object Types">​</a></h3>
<p><img decoding="async" loading="lazy" alt="List the object types" src="/pr-preview/pr-956/assets/images/getting-started-diagram-03-3734cdad8827d03f6a76db672f13be46.svg" width="911" height="188" class="img_ev3q"></p>
<p>Next make a list of the <a href="/pr-preview/pr-956/docs/concepts#what-is-a-type">types</a> of objects in your system. You might be able to identify the objects in your system from your existing domain/database model.</p>
<p>Find all the objects in the previous step using this template:</p>
<div style="margin-bottom:2rem"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title-center_Hqm8">A user {user} can perform action {action} to/on/in {object type} ... IF {conditions}</span><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>These are all the object types from the previous step (in order of appearance) based on that template:</p>
<div style="margin-top:2rem;margin-bottom:2rem" class="column-layout-3_YXBy"><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M24.977 13.087V26a1.996 1.996 0 0 1-1.996 1.996h-9.985A1.996 1.996 0 0 1 11 26V10.01c0-1.103.894-1.997 1.996-1.997h6.993z"></path><path fill="#65676E" d="M24.985 13.055H21.61a1.65 1.65 0 0 1-1.65-1.65V8z"></path><path fill="#9B9D9F" d="M20.993 17h-5.986c-.555 0-1.007.447-1.007 1s.45 1 1.007 1h5.986c.555 0 1.007-.447 1.007-1s-.45-1-1.007-1M19.05 20h-4.1c-.524 0-.95.447-.95 1s.425 1 .95 1h4.1c.524 0 .95-.447.95-1s-.426-1-.95-1"></path></svg></div><p class="documentation-card-box-icon-label_ctwe">Document</p></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M25.999 26.013H15.985V10H26a2 2 0 0 1 2 2.001v12.011a2 2 0 0 1-2 2.001"></path><path fill="#65676E" d="M10.001 26.013h5.995V10h-5.995A2 2 0 0 0 8 12.001v12.011a2 2 0 0 0 2.001 2.001"></path><path fill="#C4C4C4" d="M10.576 13.076a.572.572 0 1 0 0-1.144.572.572 0 0 0 0 1.144"></path><path fill="#9B9D9F" d="M12.548 16.008h-2.05a.493.493 0 1 1 0-.986h2.05a.493.493 0 1 1 0 .986M12.548 20.016h-2.05a.493.493 0 1 1 0-.986h2.05a.493.493 0 1 1 0 .986M13.545 18.011h-3.047a.493.493 0 1 1 0-.986h3.047a.493.493 0 1 1 0 .986"></path><path fill="#C4C4C4" d="M11.496 24.015h-.998a.493.493 0 1 1 0-.987h.998a.493.493 0 1 1 0 .987"></path></svg></div><p class="documentation-card-box-icon-label_ctwe">Folder</p></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M8.5 11.4c0-1.05.85-1.9 1.9-1.9h8.867c1.049 0 1.9.85 1.9 1.9v14.989H10.4a1.9 1.9 0 0 1-1.9-1.9z"></path><path fill="#65676E" d="M21.167 13.722H25.6c1.05 0 1.9.85 1.9 1.9v8.867a1.9 1.9 0 0 1-1.9 1.9h-4.433z"></path><rect width="2.111" height="2.111" x="11.667" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="21.111" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="16.889" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="21.111" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="21.111" fill="#65676E" rx="1"></rect></svg></div><p class="documentation-card-box-icon-label_ctwe">Organization</p></div><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>Let&#x27;s highlight all object types in <span class="blue-highlight-text">blue</span>:</p>
<div style="margin-top:2rem;margin-bottom:2rem"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-children-mono_WQfY"><ul>
<li>A user can create a <span class="blue-highlight-text">document</span> in a drive if they are the owner of the drive.</li>
<li>A user can create a <span class="blue-highlight-text">folder</span> in a drive if they are the owner of the drive.</li>
<li>A user can create a <span class="blue-highlight-text">document</span> in a folder if they are the owner of the folder.</li>
<li>A user can create a <span class="blue-highlight-text">folder</span> in a folder if they are the owner of the folder.</li>
</ul><hr><ul>
<li>A user can share a <span class="blue-highlight-text">document</span> with another user or an organization as either editor or viewer if they are an owner or editor of a document or if they are an owner of the folder/drive that is the parent of the document.</li>
</ul><hr><ul>
<li>A user can share a <span class="blue-highlight-text">folder</span> with another user or an organization as a viewer if they are an owner of the folder.</li>
</ul><hr><ul>
<li>A user can view a <span class="blue-highlight-text">document</span> if they are an owner, viewer or editor of the document or if they are a viewer, owner of the folder/drive that is the parent of the document.</li>
</ul><hr><ul>
<li>A user can edit a <span class="blue-highlight-text">document</span> if they are an owner or editor of the document or if they are an owner of the folder/drive that is the parent of the document.</li>
</ul><hr><ul>
<li>A user can change the owner of a <span class="blue-highlight-text">document</span> if they are an owner of the document.</li>
</ul><hr><ul>
<li>A user can change the owner of a <span class="blue-highlight-text">folder</span> if they are an owner of the folder.</li>
</ul><hr><ul>
<li>
<p>A user can be a member of an <span class="blue-highlight-text">organization</span>.</p>
<span style="color:gray"><p>How a user is added as a member to an organization is beyond the scope of the feature we picked to write down.</p></span>
</li>
</ul><hr><ul>
<li>A user can view a <span class="blue-highlight-text">folder</span> if they are the owner of the folder, or a viewer or owner of either the parent folder of the folder, or the parent drive of the folder.</li>
</ul></div></div></div></div>
<p>However, the list of object types is not finished. To complete the list of object types you must also add all the second nouns that appear in conditions as part of expressions of this format: <strong>&quot;{first noun} of a/the {second noun}&quot;</strong>.</p>
<div style="margin-bottom:2rem"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title-center_Hqm8">... IF {first noun} of a/the {second noun}</span><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>Let&#x27;s highlight those expressions in <span class="green-highlight-text">green</span>:</p>
<div style="margin-top:2rem;margin-bottom:2rem"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-children-mono_WQfY"><ul>
<li>A user can create a document in a drive if they are the <span class="green-highlight-text">owner of the drive</span>.</li>
<li>A user can create a folder in a drive if they are the <span class="green-highlight-text">owner of the drive</span>.</li>
<li>A user can create a document in a folder if they are the <span class="green-highlight-text">owner of the folder</span>. The folder is the <span class="green-highlight-text">parent of the document</span>.</li>
<li>A user can create a folder in a folder if they are the <span class="green-highlight-text">owner of the folder</span>. The existing folder is the <span class="green-highlight-text">parent of the new folder</span> .</li>
</ul><hr><ul>
<li>A user can share a document with another user or an organization as either editor or viewer if they are an <span class="green-highlight-text">owner or editor of a document</span> or if they are an <span class="green-highlight-text">owner of the folder/drive</span> that is the <span class="green-highlight-text">parent of the document</span>.</li>
</ul><hr><ul>
<li>A user can share a folder with another user or an organization as a viewer if they are an <span class="green-highlight-text">owner of the folder</span>.</li>
</ul><hr><ul>
<li>A user can view a document if they are an <span class="green-highlight-text">owner, viewer or editor of the document</span> or if they are a <span class="green-highlight-text">viewer or owner of the folder/drive</span> that is the <span class="green-highlight-text">parent of the document</span>.</li>
</ul><hr><ul>
<li>A user can edit a document if they are an <span class="green-highlight-text">owner or editor of the document</span> or if they are an <span class="green-highlight-text">owner of the folder/drive</span> that is the <span class="green-highlight-text">parent of the document</span>.</li>
</ul><hr><ul>
<li>A user can change the owner of a document if they are an <span class="green-highlight-text">owner of the document</span>.</li>
</ul><hr><ul>
<li>A user can change the owner of a folder if they are an <span class="green-highlight-text">owner of the folder</span>.</li>
</ul><hr><ul>
<li>
<p>A user can be a member of an organization.</p>
<span style="color:gray"><p>How a user is added as a member to an organization is beyond the scope of the feature we picked to write down.</p></span>
</li>
</ul><hr><ul>
<li>A user can view a folder if they are the <span class="green-highlight-text">owner of the folder</span>, or a <span class="green-highlight-text">viewer or owner of either the parent folder of the folder, or the parent drive of the folder</span>.</li>
</ul></div></div></div></div>
<p>The only second noun we didn&#x27;t have in our object type list is &quot;Drive&quot;, so we&#x27;ll add it to the list.
We will also need to add &quot;User&quot; to the list as it establishes the type of user who can establish relations.</p>
<div style="margin-top:2rem;margin-bottom:2rem" class="column-layout-5_K6O8"><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"></div><p class="documentation-card-box-icon-label_ctwe">User</p></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M24.977 13.087V26a1.996 1.996 0 0 1-1.996 1.996h-9.985A1.996 1.996 0 0 1 11 26V10.01c0-1.103.894-1.997 1.996-1.997h6.993z"></path><path fill="#65676E" d="M24.985 13.055H21.61a1.65 1.65 0 0 1-1.65-1.65V8z"></path><path fill="#9B9D9F" d="M20.993 17h-5.986c-.555 0-1.007.447-1.007 1s.45 1 1.007 1h5.986c.555 0 1.007-.447 1.007-1s-.45-1-1.007-1M19.05 20h-4.1c-.524 0-.95.447-.95 1s.425 1 .95 1h4.1c.524 0 .95-.447.95-1s-.426-1-.95-1"></path></svg></div><p class="documentation-card-box-icon-label_ctwe">Document</p></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M25.999 26.013H15.985V10H26a2 2 0 0 1 2 2.001v12.011a2 2 0 0 1-2 2.001"></path><path fill="#65676E" d="M10.001 26.013h5.995V10h-5.995A2 2 0 0 0 8 12.001v12.011a2 2 0 0 0 2.001 2.001"></path><path fill="#C4C4C4" d="M10.576 13.076a.572.572 0 1 0 0-1.144.572.572 0 0 0 0 1.144"></path><path fill="#9B9D9F" d="M12.548 16.008h-2.05a.493.493 0 1 1 0-.986h2.05a.493.493 0 1 1 0 .986M12.548 20.016h-2.05a.493.493 0 1 1 0-.986h2.05a.493.493 0 1 1 0 .986M13.545 18.011h-3.047a.493.493 0 1 1 0-.986h3.047a.493.493 0 1 1 0 .986"></path><path fill="#C4C4C4" d="M11.496 24.015h-.998a.493.493 0 1 1 0-.987h.998a.493.493 0 1 1 0 .987"></path></svg></div><p class="documentation-card-box-icon-label_ctwe">Folder</p></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M8.5 11.4c0-1.05.85-1.9 1.9-1.9h8.867c1.049 0 1.9.85 1.9 1.9v14.989H10.4a1.9 1.9 0 0 1-1.9-1.9z"></path><path fill="#65676E" d="M21.167 13.722H25.6c1.05 0 1.9.85 1.9 1.9v8.867a1.9 1.9 0 0 1-1.9 1.9h-4.433z"></path><rect width="2.111" height="2.111" x="11.667" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="21.111" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="16.889" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="21.111" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="21.111" fill="#65676E" rx="1"></rect></svg></div><p class="documentation-card-box-icon-label_ctwe">Organization</p></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><mask id="a" width="20" height="19" x="8" y="8" maskUnits="userSpaceOnUse" style="mask-type:alpha"><path fill="#C4C4C4" d="M8 8.8h20v18.095H8z"></path></mask><g mask="url(#a)"><path fill="#9B9D9F" d="m18 14.729-3.333-5.714L8 20.443l3.81 5.714z"></path><path fill="#C4C4C4" d="M21.333 20.443H28L21.758 9.014h-7.091z"></path><path fill="#65676E" d="m14.854 20.443-3.044 5.714 12.992.089L28 20.443z"></path></g></svg></div><p class="documentation-card-box-icon-label_ctwe">Drive</p></div><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>Now that we have a list of object types we can start defining them using the <a href="../configuration-language">OpenFGA Configuration Language</a>:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">drive</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>You&#x27;re now in the process of building a version you can use. The model above is not yet a valid authorization model accepted by <!-- -->OpenFGA<!-- -->.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>In a few cases other users can be part of determining whether an action can be performed on an object or not. Social media is an example of this &quot;a user can comment on a picture if they are a friend of the user that published it&quot;.</p><p>In those cases <a href="/pr-preview/pr-956/docs/modeling/building-blocks/object-to-object-relationships"><strong>User</strong> should also be an object type</a>. Following the last recommendation, we would discover the User type because it is a second noun in an expression: &quot;friend of the user&quot;.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="03-list-relations-for-those-types">03. List Relations For Those Types<a href="#03-list-relations-for-those-types" class="hash-link" aria-label="Direct link to 03. List Relations For Those Types" title="Direct link to 03. List Relations For Those Types">​</a></h3>
<p><img decoding="async" loading="lazy" alt="List relations for those types" src="/pr-preview/pr-956/assets/images/getting-started-diagram-04-e8b2110197173b6308a3f797e76aa471.svg" width="911" height="188" class="img_ev3q"></p>
<p>Each of the previously defined types has a set of relations. <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">Relations</a> are an important component in your model. After all, <!-- -->OpenFGA<!-- --> is a <a href="/pr-preview/pr-956/docs/authorization-concepts#what-is-relationship-based-access-control-rebac">Relationship Based Access Control (ReBAC)</a> system.</p>
<p>To identify relations for a type in the write-up we can perform an exercise similar to the one we did in <a href="#02-list-the-object-types">list the type of objects in your system</a>.</p>
<p>Relations for a type {type} will be all of these:</p>
<ul>
<li>any noun that is the {noun} of a &quot;{noun} of a/an/the {type}&quot; expression. <strong>These are typically the Foreign Keys in a database.</strong> We&#x27;ll highlight these in <span class="green-highlight-text">green</span>.</li>
<li>any verb or action that is the {action} of a &quot;can {action} (in) a/an {type}&quot; expression. <strong>These are typically the permissions for a type.</strong> We&#x27;ll highlight these in <span class="yellow-highlight-text">yellow</span>.</li>
</ul>
<div style="margin-top:2rem;margin-bottom:2rem"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-children-mono_WQfY"><ul>
<li>A user <span class="yellow-highlight-text">can create a document in a drive</span> if they are the <span class="green-highlight-text">owner of the drive</span>.</li>
<li>A user <span class="yellow-highlight-text">can create a folder in a drive</span> if they are the <span class="green-highlight-text">owner of the drive</span>.</li>
<li>A user <span class="yellow-highlight-text">can create a document in a folder</span> if they are the <span class="green-highlight-text">owner of the folder</span>. The folder is the <span class="green-highlight-text">parent of the document</span>.</li>
<li>A user <span class="yellow-highlight-text">can create a folder in a folder</span> if they are the <span class="green-highlight-text">owner of the folder</span>. The existing folder is the <span class="green-highlight-text">parent of the new folder</span>.</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can share a document with another user or an organization</span> as either editor or viewer if they are an <span class="green-highlight-text">owner or editor of a document</span> or if they are an <span class="green-highlight-text">owner of the folder/drive</span> that is the <span class="green-highlight-text">parent of the document</span>.</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can share a folder with another user or an organization</span> as a viewer if they are an <span class="green-highlight-text">owner of the folder</span>.</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can view a document</span> if they are an <span class="green-highlight-text">owner, viewer or editor of the document</span> or if they are a <span class="green-highlight-text">viewer or owner of the folder/drive</span> that is the <span class="green-highlight-text">parent of the document</span>.</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can edit a document</span> if they are an <span class="green-highlight-text">owner or editor of the document</span> or if they are an <span class="green-highlight-text">owner of the folder/drive</span> that is the <span class="green-highlight-text">parent of the document</span>.</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can change the owner of a document</span> if they are an <span class="green-highlight-text">owner of the document</span>.</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can change the owner of a folder</span> if they are an <span class="green-highlight-text">owner of the folder</span>.</li>
</ul><hr><ul>
<li>
<p>A user <span class="yellow-highlight-text">can be a member of an organization</span>.</p>
<span style="color:gray"><p>How a user is added as a member to an organization is beyond the scope of the feature we picked to write down.</p></span>
</li>
</ul><hr><ul>
<li>A user <span class="yellow-highlight-text">can view a folder</span> if they are the <span class="green-highlight-text">owner of the folder</span>, or a <span class="green-highlight-text">viewer or owner of either the parent folder of the folder, or the parent drive of the folder</span>.</li>
</ul></div></div></div></div>
<p>The resulting list is:</p>
<div style="margin-top:2rem;margin-bottom:2rem" class="column-layout-4-equal-width_WOGz"><div class="documentation-card-box_SNqO false undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-center_zUxy"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M24.977 13.087V26a1.996 1.996 0 0 1-1.996 1.996h-9.985A1.996 1.996 0 0 1 11 26V10.01c0-1.103.894-1.997 1.996-1.997h6.993z"></path><path fill="#65676E" d="M24.985 13.055H21.61a1.65 1.65 0 0 1-1.65-1.65V8z"></path><path fill="#9B9D9F" d="M20.993 17h-5.986c-.555 0-1.007.447-1.007 1s.45 1 1.007 1h5.986c.555 0 1.007-.447 1.007-1s-.45-1-1.007-1M19.05 20h-4.1c-.524 0-.95.447-.95 1s.425 1 .95 1h4.1c.524 0 .95-.447.95-1s-.426-1-.95-1"></path></svg></div><p class="documentation-card-box-icon-label_ctwe">Document</p></div><div class="documentation-card-box-children-small_Bayp"><ul>
<li>parent</li>
<li>can_share</li>
<li>owner</li>
<li>editor</li>
<li>can_write</li>
<li>can_view</li>
<li>viewer</li>
<li>can_change_owner</li>
</ul></div></div></div><div class="documentation-card-box_SNqO false undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-center_zUxy"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M25.999 26.013H15.985V10H26a2 2 0 0 1 2 2.001v12.011a2 2 0 0 1-2 2.001"></path><path fill="#65676E" d="M10.001 26.013h5.995V10h-5.995A2 2 0 0 0 8 12.001v12.011a2 2 0 0 0 2.001 2.001"></path><path fill="#C4C4C4" d="M10.576 13.076a.572.572 0 1 0 0-1.144.572.572 0 0 0 0 1.144"></path><path fill="#9B9D9F" d="M12.548 16.008h-2.05a.493.493 0 1 1 0-.986h2.05a.493.493 0 1 1 0 .986M12.548 20.016h-2.05a.493.493 0 1 1 0-.986h2.05a.493.493 0 1 1 0 .986M13.545 18.011h-3.047a.493.493 0 1 1 0-.986h3.047a.493.493 0 1 1 0 .986"></path><path fill="#C4C4C4" d="M11.496 24.015h-.998a.493.493 0 1 1 0-.987h.998a.493.493 0 1 1 0 .987"></path></svg></div><p class="documentation-card-box-icon-label_ctwe">Folder</p></div><div class="documentation-card-box-children-small_Bayp"><ul>
<li>can_create_document</li>
<li>owner</li>
<li>can_create_folder</li>
<li>can_view</li>
<li>viewer</li>
<li>parent</li>
</ul></div></div></div><div class="documentation-card-box_SNqO false undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-center_zUxy"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M8.5 11.4c0-1.05.85-1.9 1.9-1.9h8.867c1.049 0 1.9.85 1.9 1.9v14.989H10.4a1.9 1.9 0 0 1-1.9-1.9z"></path><path fill="#65676E" d="M21.167 13.722H25.6c1.05 0 1.9.85 1.9 1.9v8.867a1.9 1.9 0 0 1-1.9 1.9h-4.433z"></path><rect width="2.111" height="2.111" x="11.667" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="21.111" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="16.889" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="21.111" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="21.111" fill="#65676E" rx="1"></rect></svg></div><p class="documentation-card-box-icon-label_ctwe">Organization</p></div><div class="documentation-card-box-children-small_Bayp"><ul>
<li>member</li>
</ul></div></div></div><div class="documentation-card-box_SNqO false undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-center_zUxy"><div class="documentation-card-box-icon_ZcC1"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><mask id="a" width="20" height="19" x="8" y="8" maskUnits="userSpaceOnUse" style="mask-type:alpha"><path fill="#C4C4C4" d="M8 8.8h20v18.095H8z"></path></mask><g mask="url(#a)"><path fill="#9B9D9F" d="m18 14.729-3.333-5.714L8 20.443l3.81 5.714z"></path><path fill="#C4C4C4" d="M21.333 20.443H28L21.758 9.014h-7.091z"></path><path fill="#65676E" d="m14.854 20.443-3.044 5.714 12.992.089L28 20.443z"></path></g></svg></div><p class="documentation-card-box-icon-label_ctwe">Drive</p></div><div class="documentation-card-box-children-small_Bayp"><ul>
<li>can_create_document</li>
<li>owner</li>
<li>can_create_folder</li>
</ul></div></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In <!-- -->OpenFGA<!-- -->, relations can only have alphanumeric characters, underscores and hyphens. We recommend using underscore (_) to separate words and removing prepositions. E.g.: &quot;can create a document&quot; can become &quot;can_create_document&quot; or &quot;create_document&quot; if you are into brevity.</p></div></div>
<p>Using the <a href="../configuration-language">OpenFGA Configuration Language</a> we can enumerate the relations for each type:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">parent</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">owner</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">editor</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_share</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_view</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_write</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_change_owner</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">owner</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">parent</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_create_folder</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_create_document</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_view</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">drive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">owner</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_create_document</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_create_folder</span><span class="token plain">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>You&#x27;re now in the process of building a version you can use. The model above is not yet a valid authorization model accepted by <!-- -->OpenFGA<!-- -->.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="04-define-relations">04. Define Relations<a href="#04-define-relations" class="hash-link" aria-label="Direct link to 04. Define Relations" title="Direct link to 04. Define Relations">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Define relations" src="/pr-preview/pr-956/assets/images/getting-started-diagram-05-ffffd65d9b3eb843353c35f2f663a0c5.svg" width="911" height="188" class="img_ev3q"></p>
<p>We will use the <a href="../configuration-language">OpenFGA Configuration Language</a> to create a <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation definition</a> for each of the relations we identified. At this stage we will encode the answers to the question we asked at the beginning of the document:.</p>
<div style="margin-bottom:2rem"><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon-large_nsCS"><svg xmlns="http://www.w3.org/2000/svg" width="106" height="106" fill="none" viewBox="0 0 106 106"><rect width="105.948" height="105.948" y="0.026" fill="#BEC4CE" rx="20.252"></rect><path fill="#2D2D37" d="M64.013 73.904c-7.832 0-14.18-6.349-14.18-14.18 0-7.832 6.348-14.18 14.18-14.18s14.18 6.348 14.18 14.18-6.348 14.18-14.18 14.18"></path><path fill="url(#a)" d="M31.194 12.758h44.687c7.813 0 14.145 6.347 14.145 14.177v.006c0 7.83-6.332 14.177-14.145 14.177H31.194c-7.812 0-14.144-6.347-14.144-14.177v-.006c0-7.83 6.332-14.177 14.144-14.177"></path><path fill="url(#b)" d="M45.408 26.903v52.166c0 7.812-6.347 14.145-14.178 14.145h-.005c-7.83 0-14.178-6.333-14.178-14.145V26.903c0-7.812 6.348-14.145 14.178-14.145h.005c7.83 0 14.178 6.333 14.178 14.145"></path><path fill="#fff" d="M31.228 93.243c-7.832 0-14.18-6.35-14.18-14.181 0-7.832 6.348-14.18 14.18-14.18s14.18 6.348 14.18 14.18-6.349 14.18-14.18 14.18"></path><path fill="#000" d="M64.03 73.938c7.832 0 14.18-6.35 14.18-14.18 0-7.833-6.348-14.181-14.18-14.181s-14.18 6.349-14.18 14.18c0 7.832 6.348 14.18 14.18 14.18"></path><defs><linearGradient id="a" x1="90.016" x2="17.04" y1="26.938" y2="26.938" gradientUnits="userSpaceOnUse"><stop stop-color="#635DFF"></stop><stop offset="1" stop-color="#3885FF"></stop></linearGradient><linearGradient id="b" x1="31.228" x2="31.228" y1="93.217" y2="12.762" gradientUnits="userSpaceOnUse"><stop stop-color="#FF4F40"></stop><stop offset="1" stop-color="#F4D"></stop></linearGradient></defs></svg></div><span class="documentation-card-box-icon-title_zmVE">Why could a user U, perform an action A on an object O?</span></div><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>We are going to go over each type and each of its relations and create a definition for it.</p>
<div style="display:inline-block"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M8.5 11.4c0-1.05.85-1.9 1.9-1.9h8.867c1.049 0 1.9.85 1.9 1.9v14.989H10.4a1.9 1.9 0 0 1-1.9-1.9z"></path><path fill="#65676E" d="M21.167 13.722H25.6c1.05 0 1.9.85 1.9 1.9v8.867a1.9 1.9 0 0 1-1.9 1.9h-4.433z"></path><rect width="2.111" height="2.111" x="11.667" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="11.667" y="21.111" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="12.667" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="16.889" fill="#65676E" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="16.889" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="23.278" y="21.111" fill="#C4C4C4" rx="1"></rect><rect width="2.111" height="2.111" x="15.889" y="21.111" fill="#65676E" rx="1"></rect></svg><div style="float:right;margin-left:16px"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-organization">Type: Organization<a href="#type-organization" class="hash-link" aria-label="Direct link to Type: Organization" title="Direct link to Type: Organization">​</a></h4></div></div>
<p>We recommend starting from objects that represent groups/containers of users. For features in most systems these are easy to define and help reason about the other types. Examples of type names for these are &quot;team&quot;, &quot;group&quot;, &quot;organization&quot;, etc.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-member">Relation: Member<a href="#relation-member" class="hash-link" aria-label="Direct link to Relation: Member" title="Direct link to Relation: Member">​</a></h5>
<p>The member relation is used to tell <!-- -->OpenFGA<!-- --> about the members of an organization.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>Relation names in <!-- -->OpenFGA<!-- --> are arbitrary strings. There are no reserved relation names. You can use &quot;member&quot; or &quot;part_of&quot; or anything else to refer to a user that is part of a team/organization.</p></div></div>
<p>Remember <em>&quot;How a user is added as a member to an organization is beyond the scope of this feature.&quot;</em> For the purposes of this model the relation definition should be:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Why? This relation definition states:</p>
<ul>
<li>
<p>That organizations have members</p>
</li>
<li>
<p>That the members of an organization with id {id} are all users described by tuples of the form:</p>
<p><code>{ user: {user-id}, relation: &quot;member&quot;, object: &quot;organization:{id}&quot; }</code></p>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>Relation definitions of the form &quot;define {relation}: [user, organization#member]&quot; are fairly common. They are used to express that relationships &quot;to the object with that relation&quot; (e.g. &quot;users&quot; of type user or &quot;member of organization&quot;) can be assigned by your system and that only the users that have that relation are those with a <a href="/pr-preview/pr-956/docs/modeling/building-blocks/direct-relationships">direct relationship</a>.</p></div></div>
<p>You can read more about group membership and types in <a href="/pr-preview/pr-956/docs/modeling/user-groups">Modeling User Groups</a>.</p>
<p>For the direct relationships, we need to figure out the object types that makes sense for the relationship tuples&#x27; user. In our organization example, it makes sense for member relations to have user of type</p>
<ul>
<li>user</li>
<li>organization#member (i.e., other organization&#x27;s member)</li>
</ul>
<p>However, it will not make sense for organization member&#x27;s user to be of type document, folder or drive.</p>
<p>We will specify this logic as part of <a href="/pr-preview/pr-956/docs/concepts#what-is-a-directly-related-user-type">directly related user type</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Side note</div><div class="admonitionContent_BuS1"><p>This also automatically supports nested organizational membership if you want such a feature in your system. You could use relationship tuples like the following one to express that &quot;members of organization A are members of organization B&quot;:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{ user: &quot;organization:A#member&quot;, relation: &quot;member&quot;, object: &quot;organization:B&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to learn more, you can read further about this in <a href="/pr-preview/pr-956/docs/modeling/user-groups">Modeling User Groups</a> and <a href="/pr-preview/pr-956/docs/interacting/managing-relationships-between-objects">Managing Relationships Between Objects</a>.</p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="complete-type-definition">Complete Type Definition<a href="#complete-type-definition" class="hash-link" aria-label="Direct link to Complete Type Definition" title="Direct link to Complete Type Definition">​</a></h5>
<p>The complete <a href="/pr-preview/pr-956/docs/concepts#what-is-a-type-definition">type definition</a> for the <strong>organization</strong> type is:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="display:inline-block"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none" viewBox="0 0 36 36"><rect width="36" height="36" fill="#EFF0F2" rx="6.42"></rect><path fill="#C4C4C4" d="M24.977 13.087V26a1.996 1.996 0 0 1-1.996 1.996h-9.985A1.996 1.996 0 0 1 11 26V10.01c0-1.103.894-1.997 1.996-1.997h6.993z"></path><path fill="#65676E" d="M24.985 13.055H21.61a1.65 1.65 0 0 1-1.65-1.65V8z"></path><path fill="#9B9D9F" d="M20.993 17h-5.986c-.555 0-1.007.447-1.007 1s.45 1 1.007 1h5.986c.555 0 1.007-.447 1.007-1s-.45-1-1.007-1M19.05 20h-4.1c-.524 0-.95.447-.95 1s.425 1 .95 1h4.1c.524 0 .95-.447.95-1s-.426-1-.95-1"></path></svg><div style="float:right;margin-left:16px"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-document">Type: Document<a href="#type-document" class="hash-link" aria-label="Direct link to Type: Document" title="Direct link to Type: Document">​</a></h4></div></div>
<p>After defining your &quot;group&quot; like types, continue with the most important type for the feature: the one that allows the main use case. In this case &quot;document&quot;, since the main use case for users is to create, write, read and collaborate on documents.</p>
<p>Defining relations for the main type lets you focus on your core use case, and will likely make other type definitions easier.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-owner">Relation: Owner<a href="#relation-owner" class="hash-link" aria-label="Direct link to Relation: Owner" title="Direct link to Relation: Owner">​</a></h5>
<p>The owner relation is used to tell <!-- -->OpenFGA<!-- --> which users are owners of the document.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>In the current version, there is no way to state that there is only one owner in the authorization model. The application must limit this <a href="/pr-preview/pr-956/docs/concepts#what-is-a-user">set of users</a> to just one owner if that is a requirement.</p></div></div>
<p>When a document is created, a relationship tuple will be stored in <!-- -->OpenFGA<!-- --> representing this relationship between owner and document. This is an example of a <a href="/pr-preview/pr-956/docs/modeling/direct-access">user to object relationship</a>.</p>
<p>The relation definition then should be:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">owner</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Why? This <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation definition</a> states that:</p>
<ul>
<li>each document can have one or more owners</li>
<li>owners of a document are assignable by creating a tuple of the format
<code>{ user: &quot;{user_id}&quot;, relation: &quot;owner&quot;, object: &quot;document:{id}&quot; }</code> for individual users</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-editor">Relation: Editor<a href="#relation-editor" class="hash-link" aria-label="Direct link to Relation: Editor" title="Direct link to Relation: Editor">​</a></h5>
<p>The editor relation is used to tell <!-- -->OpenFGA<!-- --> which users are editors of the document.</p>
<p>When a user shares a document with another user or set of users as editor, a relationship tuple will be stored in <!-- -->OpenFGA<!-- --> representing this relationship between editor and document. This is an example of a <a href="/pr-preview/pr-956/docs/modeling/direct-access">users to object relationship</a>.</p>
<p>The relation definition then should be:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">editor</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Why? This relation definition states that:</p>
<ul>
<li>each document can have editors</li>
<li>the editor(s) of a document are assignable by creating a tuple with shape
<code>{ user: &quot;{user_id}&quot;, relation: &quot;editor&quot;, object: &quot;document:{id}&quot; }</code> for individual users</li>
</ul>
<p>This also supports making all members in an organization editors of the document, through a <a href="/pr-preview/pr-956/docs/modeling/user-groups">group to object relationship</a>. A relationship tuple like the following one states that the members of organization A are editors of document 0001.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;user&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;organization:A#member&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;relation&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;editor&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;object&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;document:0001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can learn more about this in <a href="/pr-preview/pr-956/docs/modeling/user-groups">Modeling User Groups</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-viewer">Relation: Viewer<a href="#relation-viewer" class="hash-link" aria-label="Direct link to Relation: Viewer" title="Direct link to Relation: Viewer">​</a></h5>
<p>The viewer relation is similar to the document&#x27;s <a href="#relation-editor">editor relation</a>. It will be defined like this:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-parent">Relation: Parent<a href="#relation-parent" class="hash-link" aria-label="Direct link to Relation: Parent" title="Direct link to Relation: Parent">​</a></h5>
<p>The parent relation is used to tell <!-- -->OpenFGA<!-- --> which folder or drive is the parent of the document.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>Relation names in <!-- -->OpenFGA<!-- --> are arbitrary strings. There are no reserved relation names. You can use &quot;parent&quot;, &quot;container&quot; or &quot;ancestor&quot; to refer to a &quot;parent folder&quot;.</p></div></div>
<p>This relation is different from the others we have seen so far, as it is a relation between two objects (a <strong>folder</strong> and or <strong>drive</strong> that is the parent of the <strong>document</strong>). This is known as an <a href="/pr-preview/pr-956/docs/modeling/building-blocks/object-to-object-relationships">object to object relationship</a>, of which <a href="/pr-preview/pr-956/docs/modeling/parent-child">parent-child is a particular case</a>.</p>
<p>When a document is created a relationship tuple will be stored in <!-- -->OpenFGA<!-- --> to represent this relationship between parent and document. The relation definition then should be:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">parent</span><span class="token plain">: </span><span class="token directly-assignable">[folder, drive]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Why? This relation definition states that:</p>
<ul>
<li>documents may have a parent</li>
<li>the parent(s) of a document with id {id} is either a folder or a drive, described by one of these relationship tuples:<!-- -->
<ul>
<li><code>{ user: &quot;folder:{id}&quot;, relation: &quot;parent&quot;, object: &quot;document:{id}&quot; }</code></li>
<li><code>{ user: &quot;drive:{id}&quot;, relation: &quot;parent&quot;, object: &quot;document:{id}&quot; }</code></li>
</ul>
</li>
</ul>
<p>We can use <a href="/pr-preview/pr-956/docs/configuration-language#direct-relationship-type-restrictions">direct type restriction</a> to ensure a document&#x27;s parent can only be an object of type either drive or folder.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Side note</div><div class="admonitionContent_BuS1"><p>You might have noticed that the &quot;user&quot; in the tuple is an object. This is a special syntax <!-- -->OpenFGA<!-- --> accepts in the &quot;user&quot; parameter to write <a href="/pr-preview/pr-956/docs/modeling/building-blocks/object-to-object-relationships">object to object relationships</a>. You can read more about writing data to manage object to object relationships in <a href="/pr-preview/pr-956/docs/interacting/managing-relationships-between-objects">Managing Relationships Between Objects</a>.</p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-can_share">Relation: can_share<a href="#relation-can_share" class="hash-link" aria-label="Direct link to Relation: can_share" title="Direct link to Relation: can_share">​</a></h5>
<p>We need to express the following in the <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation definition</a>:</p>
<p><em>A user can share a document with another user or an organization as either editor or viewer if they are an owner or editor of a document or if they are an owner of the folder that is the parent of the document.</em></p>
<p>We can achieve that with the following definition using <a href="../configuration-language">OpenFGA Configuration Language</a>:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_share</span><span class="token plain">: owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are a few key things here:</p>
<ul>
<li><strong>We don&#x27;t use a <a href="/pr-preview/pr-956/docs/configuration-language#direct-relationship-type-restrictions">direct relationship type restriction</a> as part of the definition.</strong> can_share is a common example of representing a permission that is defined in terms of other relations but is not directly assignable by the system.</li>
<li>The relation definition contains a <a href="/pr-preview/pr-956/docs/configuration-language#the-union-operator">union operator</a> separating a list of relations that the user must have with the object in order to &quot;be able to share the document&quot;. It is any of:<!-- -->
<ul>
<li>Being an owner of the document</li>
<li>Being an editor of the document</li>
<li>Being an owner of the parent of the document. Whether the parent is a drive or a folder is not important, as they both have an owner relation.</li>
</ul>
</li>
</ul>
<p>You can read more about the aforementioned items in <a href="/pr-preview/pr-956/docs/modeling/roles-and-permissions">Modeling Roles and Permissions</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-can_view">Relation: can_view<a href="#relation-can_view" class="hash-link" aria-label="Direct link to Relation: can_view" title="Direct link to Relation: can_view">​</a></h5>
<p>We need to express the following in the <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation definition</a>:</p>
<p><em>A user can view a document if they are an owner, viewer or editor of a document or if they are a viewer, owner of the folder/drive that is the parent of the document.</em></p>
<p>Similar to the <a href="#relation-can_share">can_share relation</a>, we can achieve that with the following definition using <a href="../configuration-language">OpenFGA Configuration Language</a>:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_view</span><span class="token plain">: viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-can_write">Relation: can_write<a href="#relation-can_write" class="hash-link" aria-label="Direct link to Relation: can_write" title="Direct link to Relation: can_write">​</a></h5>
<p>We need to express the following in the <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation definition</a>:</p>
<p><em>A user can write a document if they are an owner or editor of a document or if they are an owner or editor of the folder/drive that is the parent of the document.</em></p>
<p>Similar to the <a href="#relation-can_share">can_share relation</a>, we can achieve that with the following definition using <a href="../configuration-language">OpenFGA Configuration Language</a>:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_write</span><span class="token plain">: editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="relation-can_change_owner">Relation: can_change_owner<a href="#relation-can_change_owner" class="hash-link" aria-label="Direct link to Relation: can_change_owner" title="Direct link to Relation: can_change_owner">​</a></h5>
<p>We need to express the following in the <a href="/pr-preview/pr-956/docs/concepts#what-is-a-relation">relation definition</a>:</p>
<p><em>A user can change the owner of a document if they are an owner of the document.</em></p>
<p>Similar to the <a href="#relation-can_share">can_share relation</a>, we can achieve that with the following definition using <a href="../configuration-language">OpenFGA Configuration Language</a>:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_change_owner</span><span class="token plain">: owner</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="complete-type-definition-1">Complete Type Definition<a href="#complete-type-definition-1" class="hash-link" aria-label="Direct link to Complete Type Definition" title="Direct link to Complete Type Definition">​</a></h5>
<p>The complete <a href="/pr-preview/pr-956/docs/concepts#what-is-a-type-definition">type definition</a> for the document type is:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">owner</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">editor</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">parent</span><span class="token plain">: </span><span class="token directly-assignable">[folder]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_share</span><span class="token plain">: owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_view</span><span class="token plain">: viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_write</span><span class="token plain">: editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_change_owner</span><span class="token plain">: owner</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Combining the type definitions for document and organization, we have</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">owner</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">editor</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">: </span><span class="token directly-assignable">[user, organization#member]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">parent</span><span class="token plain">: </span><span class="token directly-assignable">[folder]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_share</span><span class="token plain">: owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_view</span><span class="token plain">: viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_write</span><span class="token plain">: editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"> owner </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> parent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_change_owner</span><span class="token plain">: owner</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <!-- -->OpenFGA<!-- --> authorization model API and SDK only accepts JSON in its input. To convert from DSL to JSON, you may use the <a href="https://github.com/openfga/cli" target="_blank" rel="noopener noreferrer">FGA CLI</a> to run <code>fga model transform</code>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="05-test-the-model">05. Test The Model<a href="#05-test-the-model" class="hash-link" aria-label="Direct link to 05. Test The Model" title="Direct link to 05. Test The Model">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Test the model" src="/pr-preview/pr-956/assets/images/getting-started-diagram-06-8eb4b8f4a925670b0ff05fa86c4b890e.svg" width="911" height="188" class="img_ev3q"></p>
<p>Once you have defined your group like types and the most important type for your feature you want to ensure everything is working as expected. This means testing the model.</p>
<p>How? Remember from the introduction that <strong>OpenFGA<!-- -->&#x27;s</strong> main job is to answer the question:</p>
<div style="margin-top:2rem;margin-bottom:2rem"><div class="documentation-card-box_SNqO documentation-card-box-fitcontent_koVg undefined"><div class="documentation-card-box-content_Z5TD"><div class="documentation-card-box-alignment-left__zex"><div class="documentation-card-box-icon-large_nsCS"><svg xmlns="http://www.w3.org/2000/svg" width="106" height="106" fill="none" viewBox="0 0 106 106"><rect width="105.948" height="105.948" y="0.026" fill="#BEC4CE" rx="20.252"></rect><path fill="#2D2D37" d="M64.013 73.904c-7.832 0-14.18-6.349-14.18-14.18 0-7.832 6.348-14.18 14.18-14.18s14.18 6.348 14.18 14.18-6.348 14.18-14.18 14.18"></path><path fill="url(#a)" d="M31.194 12.758h44.687c7.813 0 14.145 6.347 14.145 14.177v.006c0 7.83-6.332 14.177-14.145 14.177H31.194c-7.812 0-14.144-6.347-14.144-14.177v-.006c0-7.83 6.332-14.177 14.144-14.177"></path><path fill="url(#b)" d="M45.408 26.903v52.166c0 7.812-6.347 14.145-14.178 14.145h-.005c-7.83 0-14.178-6.333-14.178-14.145V26.903c0-7.812 6.348-14.145 14.178-14.145h.005c7.83 0 14.178 6.333 14.178 14.145"></path><path fill="#fff" d="M31.228 93.243c-7.832 0-14.18-6.35-14.18-14.181 0-7.832 6.348-14.18 14.18-14.18s14.18 6.348 14.18 14.18-6.349 14.18-14.18 14.18"></path><path fill="#000" d="M64.03 73.938c7.832 0 14.18-6.35 14.18-14.18 0-7.833-6.348-14.181-14.18-14.181s-14.18 6.349-14.18 14.18c0 7.832 6.348 14.18 14.18 14.18"></path><defs><linearGradient id="a" x1="90.016" x2="17.04" y1="26.938" y2="26.938" gradientUnits="userSpaceOnUse"><stop stop-color="#635DFF"></stop><stop offset="1" stop-color="#3885FF"></stop></linearGradient><linearGradient id="b" x1="31.228" x2="31.228" y1="93.217" y2="12.762" gradientUnits="userSpaceOnUse"><stop stop-color="#FF4F40"></stop><stop offset="1" stop-color="#F4D"></stop></linearGradient></defs></svg></div><span class="documentation-card-box-icon-title_zmVE">Can user U, perform an action A on an object O?</span></div><div class="documentation-card-box-children_i280"></div></div></div></div>
<p>The <!-- -->OpenFGA<!-- --> service does that by checking if a user has a particular relationship to an object, based on your authorization model and relationship tuples.</p>
<div style="margin-top:2rem;margin-bottom:2rem" class="column-layout-2_O2db"><div class="documentation-card-box-filled_F0BA undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">General Authorization Check</span><div class="documentation-card-box-children_i280"><p>&quot;Can user <b>U</b> <u>perform action</u> <b>A</b> on object <b>O</b>?&quot;</p></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">OpenFGA (ReBAC) Authorization Check</span><div class="documentation-card-box-children_i280"><p>&quot;Can user <b>U</b> <u>have relation</u> <b>R</b> with object <b>O</b>?&quot;</p></div></div></div></div>
<p>What we want is to ensure that given our current authorization model and some sample relationship tuples, we get the expected results for those questions.</p>
<p>So we&#x27;ll write some relationship tuples and assertions. An <!-- -->OpenFGA<!-- --> assertion takes one of these forms:</p>
<ol>
<li>user U <strong>has</strong> relation R with object O</li>
<li>user U <strong>does not have</strong> relation R with object O</li>
</ol>
<p>Much like automated tests and assertions work for programming languages, you can use assertions to prevent regressions while you change your tuples and authorization model. Essentially, assertions help you ensure things work like you expect them to work as you iterate.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="write-relationship-tuples">Write Relationship Tuples<a href="#write-relationship-tuples" class="hash-link" aria-label="Direct link to Write Relationship Tuples" title="Direct link to Write Relationship Tuples">​</a></h4>
<p>The relationship tuples should represent real examples from your system with fake data.</p>
<p>At this point you haven&#x27;t defined the drive or folder types, so you can only test things based on users or organization members&#x27; relationships to documents. Let&#x27;s imagine an example setup and write the relationship tuples for it:</p>
<table><thead><tr><th>System Action</th><th>Relationship Tuple</th></tr></thead><tbody><tr><td>Anne is a member of the contoso organization</td><td><code>{ user:&quot;user:anne&quot;, relation: &quot;member&quot;, object: &quot;organization:contoso&quot;}</code></td></tr><tr><td>Beth is a member of fabrikam organization</td><td><code>{ user:&quot;user:beth&quot;, relation: &quot;member&quot;, object: &quot;organization:fabrikam&quot;}</code></td></tr><tr><td>Anne creates document:1, becomes its owner.</td><td><code>{ user:&quot;user:anne&quot;, relation: &quot;owner&quot;, object: &quot;document:1&quot;}</code></td></tr><tr><td>Anne shares document:1 with all members of the fabrikam organization as editor.</td><td><code>{ user:&quot;organization:fabrikam#member&quot;, relation: &quot;editor&quot;, object: &quot;document:1&quot;}</code></td></tr><tr><td>Beth creates document:2 and becomes its owner.</td><td><code>{ user:&quot;user:beth&quot;, relation: &quot;owner&quot;, object: &quot;document:2&quot;}</code></td></tr><tr><td>Beth shares document:2 with all members of the contoso organization as viewer</td><td><code>{ user:&quot;organization:contoso#member&quot;, relation: &quot;viewer&quot;, object: &quot;document:2&quot;}</code></td></tr></tbody></table>
<p>Follow these steps to create relationship tuples.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-assertions">Create Assertions<a href="#create-assertions" class="hash-link" aria-label="Direct link to Create Assertions" title="Direct link to Create Assertions">​</a></h4>
<p>According to our <a href="#write-it-in-plain-language">written down model</a> and the <a href="#write-relationship-tuples">relationship tuples</a> from the previous step, these assertions should be specified:</p>
<p>Because anne is the owner of document:1:</p>
<ul>
<li>user <strong>anne</strong> has relation <strong>can_share</strong> with document:1</li>
<li>user <strong>anne</strong> has relation <strong>can_write</strong> with document:1</li>
<li>user <strong>anne</strong> has relation <strong>can_view</strong> with document:1</li>
<li>user <strong>anne</strong> has relation <strong>can_change_owner</strong> with document:1</li>
</ul>
<p>Because beth is a member of organization<!-- -->:fabrikam<!-- --> and members of organization<!-- -->:fabrikam<!-- --> are writer of document:1:</p>
<ul>
<li>user <strong>beth</strong> has relation <strong>can_share</strong> with document:1</li>
<li>user <strong>beth</strong> has relation <strong>can_write</strong> with document:1</li>
<li>user <strong>beth</strong> has relation <strong>can_view</strong> with document:1</li>
<li>user <strong>beth</strong> does not have relation <strong>can_change_owner</strong> with document:1</li>
</ul>
<p>Because beth is the owner of document:2:</p>
<ul>
<li>user <strong>beth</strong> has relation <strong>can_share</strong> with document:2</li>
<li>user <strong>beth</strong> has relation <strong>can_write</strong> with document:2</li>
<li>user <strong>beth</strong> has relation <strong>can_view</strong> with document:2</li>
<li>user <strong>beth</strong> has relation <strong>can_change_owner</strong> with document:2</li>
</ul>
<p>Because anne is a member of organization<!-- -->:contoso<!-- --> and members of organization<!-- -->:contoso<!-- --> are viewer of document:2:</p>
<ul>
<li>user <strong>anne</strong> does not have relation <strong>can_share</strong> with document:2</li>
<li>user <strong>anne</strong> does not have relation <strong>can_write</strong> with document:2</li>
<li>user <strong>anne</strong> has relation <strong>can_view</strong> with document:2</li>
<li>user <strong>anne</strong> does not have relation <strong>can_change_owner</strong> with document:2</li>
</ul>
<p>Follow these steps to create assertions.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="run-assertions">Run Assertions<a href="#run-assertions" class="hash-link" aria-label="Direct link to Run Assertions" title="Direct link to Run Assertions">​</a></h4>
<p>Run the assertions. They should all pass. If they don&#x27;t you can use the query view to understand what is causing them to fail, and then update your authorization model and relation tuples accordingly.</p>
<p>Once all the assertions are working, you should continue the iterative process of working on your model.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="06-iterate">06. Iterate<a href="#06-iterate" class="hash-link" aria-label="Direct link to 06. Iterate" title="Direct link to 06. Iterate">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Iterate" src="/pr-preview/pr-956/assets/images/getting-started-diagram-07-110858004c2892e28df4c404a50abce2.svg" width="911" height="208" class="img_ev3q"></p>
<p>We&#x27;ll leave the exercise of defining the drive and folder relations, then adding relationship tuples and assertions to you. Once you are finished, check out the complete example to see how you did.</p>
<p>When defining the authorization model for your own system, you would continue iterating on the <a href="/pr-preview/pr-956/docs/concepts#what-is-an-authorization-model">authorization model</a> with the <a href="#01-pick-the-most-important-feature">next feature</a> and so on.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-sections">Related Sections<a href="#related-sections" class="hash-link" aria-label="Direct link to Related Sections" title="Direct link to Related Sections">​</a></h2>
<div><div class="documentation-related-section-description_Un_N"><span>Check the following sections for more on how to model with OpenFGA.</span></div><div class="column-layout-3_YXBy"><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">OpenFGA Concepts</span><p class="documentation-card-box-description_u7_j">Learn about the OpenFGA Concepts.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/pr-preview/pr-956/docs/concepts">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Configuration Language</span><p class="documentation-card-box-description_u7_j">Learn about OpenFGA Configuration Language.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/pr-preview/pr-956/docs/configuration-language">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Direct Access</span><p class="documentation-card-box-description_u7_j">Learn about modeling user access to an object.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/pr-preview/pr-956/docs/modeling/direct-access">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openfga/openfga.dev/edit/main/docs/content/modeling/getting-started.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-956/docs/modeling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Modeling Guides</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-956/docs/modeling/direct-access"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Direct Access</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction-to-modeling" class="table-of-contents__link toc-highlight">Introduction To Modeling</a></li><li><a href="#a-process-for-defining-authorization-models" class="table-of-contents__link toc-highlight">A Process For Defining Authorization Models</a><ul><li><a href="#01-pick-the-most-important-feature" class="table-of-contents__link toc-highlight">01. Pick The Most Important Feature</a></li><li><a href="#02-list-the-object-types" class="table-of-contents__link toc-highlight">02. List The Object Types</a></li><li><a href="#03-list-relations-for-those-types" class="table-of-contents__link toc-highlight">03. List Relations For Those Types</a></li><li><a href="#04-define-relations" class="table-of-contents__link toc-highlight">04. Define Relations</a></li><li><a href="#05-test-the-model" class="table-of-contents__link toc-highlight">05. Test The Model</a></li><li><a href="#06-iterate" class="table-of-contents__link toc-highlight">06. Iterate</a></li></ul></li><li><a href="#related-sections" class="table-of-contents__link toc-highlight">Related Sections</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><span class="footer__link-separator">·</span><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><span class="footer__link-separator">·</span><a href="https://github.com/openfga" target="_blank" rel="noopener noreferrer" class="header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><span class="footer__link-separator">·</span><a href="https://mastodon.social/@openfga" target="_blank" rel="me noopener noreferrer" class="header-social header-mastodon-link" aria-label="OpenFGA on Mastodon">Mastodon</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><a href="https://www.linuxfoundation.org/trademark-usage"><img src="/img/cncf-icon-white.svg" alt="CNCF" style="vertical-align:middle; margin-right:8px;"></a> &copy; 2025 <a href="https://www.linuxfoundation.org/" target="_blank">The Linux Foundation</a>®. All rights reserved. <span class="display-on-desktop">For a list of trademarks of The Linux Foundation, see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text" target="blank">Trademark Usage page</a>.</span></div></div></div></div></footer></div></div>
</body>
</html>