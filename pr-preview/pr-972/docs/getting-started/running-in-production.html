<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content/getting-started/production-best-practices" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Production Best Practices | OpenFGA</title><meta data-rh="true" http-equiv="Content-Security-Policy" content="default-src &#x27;none&#x27;; base-uri &#x27;self&#x27;; block-all-mixed-content; child-src www.youtube-nocookie.com; prefetch-src &#x27;self&#x27;; connect-src &#x27;self&#x27; https://raw.githubusercontent.com https://s3.amazonaws.com https://cdn.cookielaw.org https://privacyportal.onetrust.com https://heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://forms.hscollectedforms.net ; font-src &#x27;self&#x27; https://fonts.googleapis.com https://fonts.gstatic.com; form-action &#x27;none&#x27;; frame-src www.youtube-nocookie.com; img-src &#x27;self&#x27; data: https://pbs.twimg.com https://docs.github.com https://heapanalytics.com https://forms.hsforms.com https://track.hubspot.com ; media-src &#x27;self&#x27;; object-src &#x27;none&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://cdn.cookielaw.org https://geolocation.onetrust.com https://cdn.heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com; style-src &#x27;unsafe-inline&#x27; &#x27;self&#x27; https://fonts.googleapis.com;"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openfga.dev/pr-preview/pr-972/docs/getting-started/running-in-production"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="OpenFGA, open source, fine-grained-authorization, fine grained authorization, Zanzibar"><meta data-rh="true" property="og:image" content="https://openfga.dev/img/og-rich-embed.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Production Best Practices | OpenFGA"><meta data-rh="true" name="description" content="Best Practices of Running OpenFGA in a Production Environment"><meta data-rh="true" property="og:description" content="Best Practices of Running OpenFGA in a Production Environment"><link data-rh="true" rel="icon" href="/pr-preview/pr-972/img/openfga-icon.svg"><link data-rh="true" rel="canonical" href="https://openfga.dev/pr-preview/pr-972/docs/getting-started/running-in-production"><link data-rh="true" rel="alternate" href="https://openfga.dev/pr-preview/pr-972/docs/getting-started/running-in-production" hreflang="en"><link data-rh="true" rel="alternate" href="https://openfga.dev/pr-preview/pr-972/docs/getting-started/running-in-production" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/pr-preview/pr-972/blog/rss.xml" title="OpenFGA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pr-preview/pr-972/blog/atom.xml" title="OpenFGA Atom Feed">







<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"><link rel="stylesheet" href="/pr-preview/pr-972/assets/css/styles.86d33b39.css">
<script src="/pr-preview/pr-972/assets/js/runtime~main.c46ba986.js" defer="defer"></script>
<script src="/pr-preview/pr-972/assets/js/main.a17aeb25.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div class="CustomizedRoot"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/pr-preview/pr-972/"><div class="navbar__logo"><img src="/pr-preview/pr-972/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/pr-972/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-972/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-972/docs/fga">Docs</a><a class="navbar__item navbar__link" href="/pr-preview/pr-972/api/service">API</a><a class="navbar__item navbar__link" href="/pr-preview/pr-972/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openfga/openfga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-972/docs/fga">What is OpenFGA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-972/docs/authorization-concepts">Authorization Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-972/docs/concepts">OpenFGA Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-972/docs/configuration-language">Configuration Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-972/docs/community">Community</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/pr-preview/pr-972/docs/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/setup-openfga/overview">Setup OpenFGA</a><button aria-label="Expand sidebar category &#x27;Setup OpenFGA&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/install-sdk">Install SDK Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/create-store">Create a Store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/setup-sdk-client">Setup SDK Client for Store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/configure-model">Configure Authorization Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/update-tuples">Update Relationship Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/perform-check">Perform a Check</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/perform-list-objects">Perform a List Objects Request</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/perform-list-users">Perform a List Users Request</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/cli">Use the FGA CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/framework">Integrate Within a Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/immutable-models">Immutable Authorization Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/running-in-production">Production Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/tuples-api-best-practices">Implementation Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-972/docs/getting-started/configure-telemetry">Configure SDK Client Telemetry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-972/docs/modeling">Modeling Guides</a><button aria-label="Expand sidebar category &#x27;Modeling Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-972/docs/interacting">Interacting with the API</a><button aria-label="Expand sidebar category &#x27;Interacting with the API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-972/docs/best-practices/adoption-patterns">Best Practices</a><button aria-label="Expand sidebar category &#x27;Best Practices&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-972/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-972/docs/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Production Best Practices</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Running OpenFGA in Production</h1></header>
<!-- -->
<p>The following list outlines best practices for running OpenFGA in a production environment:</p>
<ul>
<li><a href="/pr-preview/pr-972/docs/getting-started/setup-openfga/configure-openfga#configuring-authentication">Configure Authentication</a></li>
<li>Enable HTTP TLS or gRPC TLS or both</li>
<li>Set the log format to &quot;json&quot; and log level to &quot;info&quot;</li>
<li><a href="/pr-preview/pr-972/docs/getting-started/setup-openfga/playground#disabling-the-playground">Disable the Playground</a></li>
<li><a href="#cluster-recommendations">Set Cluster</a></li>
<li><a href="#database-recommendations">Set Database Options</a></li>
<li><a href="#maximum-results">Set Maximum Results</a></li>
<li><a href="#concurrency-limits">Set Concurrency Limits</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-recommendations">Cluster recommendations<a href="#cluster-recommendations" class="hash-link" aria-label="Direct link to Cluster recommendations" title="Direct link to Cluster recommendations">​</a></h2>
<p>We recommend:</p>
<ol>
<li>Turn on in-memory caching in Check API via flags. This will reduce latency of requests, but it will increase the staleness of OpenFGA&#x27;s responses. Please see <a href="/pr-preview/pr-972/docs/interacting/consistency#cache-expiration">Cache Expiration</a> for details on the flags.</li>
<li>Prefer having a small pool of servers with high capacity (memory and CPU cores) instead of a big pool of servers, to increase cache hit ratios and simplify pool management.</li>
<li>Turn on metrics collection via the flags <code>--metrics-enabled</code> and <code>--datastore-metrics-enabled</code>. This will allow you to debug issues.</li>
<li>Turn on tracing via the flag <code>--trace-enabled</code>, but set sampling ratio to a low value, for example <code>--trace-sample-ratio=0.3</code>. This will allow you to debug issues without overwhelming the tracing server. However, keep in mind that enabling tracing comes with a slight performance cost.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-recommendations">Database recommendations<a href="#database-recommendations" class="hash-link" aria-label="Direct link to Database recommendations" title="Direct link to Database recommendations">​</a></h2>
<p>To ensure good performance for OpenFGA, it is recommended that the <a href="/pr-preview/pr-972/docs/getting-started/setup-openfga/configure-openfga#configuring-data-storage">database</a> be:</p>
<ul>
<li>Co-located in the same physical datacenter and network as your OpenFGA servers. This will minimize latency of database calls.</li>
<li>Used exclusively for OpenFGA and not shared with other applications. This allows scaling the database independently and avoiding contention with your database.</li>
<li>Bootstrapped and managed with the <code>openfga migrate</code> command. This will ensure the appropriate database indexes are created.</li>
</ul>
<p>It&#x27;s strongly recommended to fine-tune your server database connection settings to avoid having to re-establish database connections frequently. Establishing database connections is slow and will negatively impact performance, and so here are some guidelines for managing database connection settings:</p>
<ul>
<li>
<p>The server setting <code>OPENFGA_DATASTORE_MAX_OPEN_CONNS</code> should be set to be equal to your database&#x27;s max connections. For example, in Postgres, you can see this value via running the SQL query <code>SHOW max_connections;</code>. If you are running multiple instances of the OpenFGA server, you should divide this setting equally among the instances. For example, if your database&#x27;s <code>max_connections</code> is 100, and you have 2 OpenFGA instances, <code>OPENFGA_DATASTORE_MAX_OPEN_CONNS</code> should be set to 50 for each instance.</p>
</li>
<li>
<p>The <code>OPENFGA_DATASTORE_MAX_IDLE_CONNS</code> should be set to a value no greater than the maximum open connections (see the bullet point above), but it should be set sufficiently high enough to avoid having to recreate connections on each request.</p>
<p>If, when monitoring your database stats, you see a lot of database connections being closed and subsequently reopened, then you should consider increasing the maximum number of idle connections.</p>
</li>
<li>
<p>If idle connections are getting reaped frequently, then consider increasing the <code>OPENFGA_DATASTORE_CONN_MAX_IDLE_TIME</code> to a large value. When in doubt, prioritize keeping connections around for longer rather than shorter, because doing so will drastically improve performance.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concurrency-limits">Concurrency limits<a href="#concurrency-limits" class="hash-link" aria-label="Direct link to Concurrency limits" title="Direct link to Concurrency limits">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Before modifying concurrency limits please make sure you&#x27;ve followed the guidance for <a href="#database-recommendations">Database Recommendations</a></p></div></div>
<p>OpenFGA queries such as Check, ListObjects and ListUsers can be quite database and CPU intensive in some cases. If you notice that a single request is consuming a lot of CPU or creating a high degree of database contention, then you may consider setting some concurrency limits to protect other requests from being negatively impacted by overly aggressive queries.</p>
<p>The following table enumerates the server&#x27;s concurrency specific settings:</p>
<table><thead><tr><th>flag</th><th>env</th><th>config</th></tr></thead><tbody><tr><td>--max-concurrent-reads-for-list-objects</td><td>OPENFGA_MAX_CONCURRENT_READS_FOR_LIST_OBJECTS</td><td>maxConcurrentReadsForListObjects</td></tr><tr><td>--max-concurrent-reads-for-list-users</td><td>OPENFGA_MAX_CONCURRENT_READS_FOR_LIST_USERS</td><td>maxConcurrentReadsForListUsers</td></tr><tr><td>--max-concurrent-reads-for-check</td><td>OPENFGA_MAX_CONCURRENT_READS_FOR_CHECK</td><td>maxConcurrentReadsForCheck</td></tr><tr><td>--resolve-node-limit</td><td>OPENFGA_RESOLVE_NODE_LIMIT</td><td>resolveNodeLimit</td></tr><tr><td>--resolve-node-breadth-limit</td><td>OPENFGA_RESOLVE_NODE_BREADTH_LIMIT</td><td>resolveNodeBreadthLimit</td></tr><tr><td>--max-concurrent-checks-per-batch-check</td><td>OPENFGA_MAX_CONCURRENT_CHECKS_PER_BATCH_CHECK</td><td>maxConcurrentChecksPerBatchCheck</td></tr></tbody></table>
<p>Determining the right values for these settings will be based on a variety of factors including, but not limited to, the database specific deployment topology, the FGA model(s) involved, and the relationship tuples in the system. However, here are some high-level guidelines:</p>
<ul>
<li>
<p>If a single ListObjects or ListUsers query is negatively impacting other query endpoints by increasing their latency or their error rate, then consider setting a lower value for <code>OPENFGA_MAX_CONCURRENT_READS_FOR_LIST_OBJECTS</code> or <code>OPENFGA_MAX_CONCURRENT_READS_FOR_LIST_USERS</code>.</p>
</li>
<li>
<p>If a single Check query is negatively impacting other query endpoints by increasing their latency or their error rate, then consider setting a lower value for <code>OPENFGA_MAX_CONCURRENT_READS_FOR_CHECK</code>.</p>
</li>
</ul>
<p>If you still see high request latencies despite the guidance above, then you may additionally consider setting stricter limits on the query resolution behavior by limiting the resolution depth and resolution breadth. These can be controlled with the <code>OPENFGA_RESOLVE_NODE_LIMIT</code> and <code>OPENFGA_RESOLVE_NODE_BREADTH_LIMIT</code> settings, respectively. Consider these guidelines:</p>
<ul>
<li>
<p><code>OPENFGA_RESOLVE_NODE_LIMIT</code> limits the resolution depth of a single query, and thus it sets an upper bound on how deep a relationship hierarchy may be. A high value will allow a single query to involve more hierarchical resolution and therefore more database queries, while a low value will reduce the number of hierarchical resolutions that will be allowed and thus reduce the number of database queries.</p>
</li>
<li>
<p><code>OPENFGA_RESOLVE_NODE_BREADTH_LIMIT</code> limits the resolution breadth. It sets an upper bound on the number of in-flight resolutions that can be taking place on one or more <a href="/pr-preview/pr-972/docs/concepts#what-is-a-user">usersets</a>. A high value will allow a single query to involve more concurrent evaluations to take place and therefore more database queries and server processes, while a low value will reduce the overall number of concurrent resolutions that will be allowed and thus reduce the number of database queries and server processes.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="maximum-results">Maximum results<a href="#maximum-results" class="hash-link" aria-label="Direct link to Maximum results" title="Direct link to Maximum results">​</a></h2>
<p>Both the ListObjects and ListUsers endpoints will continue retrieving results until one of the following conditions is met:</p>
<ul>
<li>The maximum number of results is found</li>
<li>The entire pool of possible results has been searched</li>
<li>The API times out</li>
</ul>
<p>By default, both ListObjects and ListUsers have a maximum results limit of 1,000. The higher the quantity of potential results in the system, the more time and resource-intensive it becomes to search for a large number of maximum results. This increased load can impact performance, potentially leading to time-outs in some cases. If your use case allows, consider setting a lower max results value via the <code>OPENFGA_LIST_OBJECTS_MAX_RESULTS</code> or <code>OPENFGA_LIST_USERS_MAX_RESULTS</code> configuration properties. This adjustment can lead to immediate improvements in time and resource efficiency.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-sections">Related Sections<a href="#related-sections" class="hash-link" aria-label="Direct link to Related Sections" title="Direct link to Related Sections">​</a></h2>
<div><div class="documentation-related-section-description_Un_N"><span>Check the following sections for more on how to run OpenFGA in production environment.</span></div><div class="column-layout-3_YXBy"><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Data and API Best Practices</span><p class="documentation-card-box-description_u7_j">Learn the best practices for managing data and invoking APIs in production environment</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/pr-preview/pr-972/docs/getting-started/tuples-api-best-practices">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Migrating Relations</span><p class="documentation-card-box-description_u7_j">Learn how to migrate relations in a production environment</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/pr-preview/pr-972/docs/modeling/migrating/migrating-relations">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openfga/openfga.dev/edit/main/docs/content/getting-started/production-best-practices.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-972/docs/getting-started/immutable-models"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Immutable Authorization Models</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-972/docs/getting-started/tuples-api-best-practices"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Implementation Best Practices</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cluster-recommendations" class="table-of-contents__link toc-highlight">Cluster recommendations</a></li><li><a href="#database-recommendations" class="table-of-contents__link toc-highlight">Database recommendations</a></li><li><a href="#concurrency-limits" class="table-of-contents__link toc-highlight">Concurrency limits</a></li><li><a href="#maximum-results" class="table-of-contents__link toc-highlight">Maximum results</a></li><li><a href="#related-sections" class="table-of-contents__link toc-highlight">Related Sections</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><span class="footer__link-separator">·</span><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><span class="footer__link-separator">·</span><a href="https://github.com/openfga" target="_blank" rel="noopener noreferrer" class="header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><span class="footer__link-separator">·</span><a href="https://mastodon.social/@openfga" target="_blank" rel="me noopener noreferrer" class="header-social header-mastodon-link" aria-label="OpenFGA on Mastodon">Mastodon</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><a href="https://www.linuxfoundation.org/trademark-usage"><img src="/img/cncf-icon-white.svg" alt="CNCF" style="vertical-align:middle; margin-right:8px;"></a> &copy; 2025 <a href="https://www.linuxfoundation.org/" target="_blank">The Linux Foundation</a>®. All rights reserved. <span class="display-on-desktop">For a list of trademarks of The Linux Foundation, see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text" target="blank">Trademark Usage page</a>.</span></div></div></div></div></footer></div></div>
</body>
</html>