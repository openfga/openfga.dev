<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">4 posts tagged with &quot;openfga&quot; | OpenFGA</title><meta data-rh="true" http-equiv="Content-Security-Policy" content="default-src &#x27;none&#x27;; base-uri &#x27;self&#x27;; block-all-mixed-content; child-src www.youtube-nocookie.com; prefetch-src &#x27;self&#x27;; connect-src &#x27;self&#x27; https://raw.githubusercontent.com https://s3.amazonaws.com https://cdn.cookielaw.org https://privacyportal.onetrust.com https://heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://forms.hscollectedforms.net ; font-src &#x27;self&#x27; https://fonts.googleapis.com https://fonts.gstatic.com; form-action &#x27;none&#x27;; frame-src www.youtube-nocookie.com; img-src &#x27;self&#x27; data: https://pbs.twimg.com https://docs.github.com https://heapanalytics.com https://forms.hsforms.com https://track.hubspot.com ; media-src &#x27;self&#x27;; object-src &#x27;none&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://cdn.cookielaw.org https://geolocation.onetrust.com https://cdn.heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com; style-src &#x27;unsafe-inline&#x27; &#x27;self&#x27; https://fonts.googleapis.com;"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openfga.dev/pr-preview/pr-685/blog/tags/openfga"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="OpenFGA, open source, fine-grained-authorization, fine grained authorization, Zanzibar"><meta data-rh="true" property="og:image" content="https://openfga.dev/img/og-rich-embed.png"><meta data-rh="true" property="og:title" content="4 posts tagged with &quot;openfga&quot; | OpenFGA"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/pr-preview/pr-685/img/openfga-icon.svg"><link data-rh="true" rel="canonical" href="https://openfga.dev/pr-preview/pr-685/blog/tags/openfga"><link data-rh="true" rel="alternate" href="https://openfga.dev/pr-preview/pr-685/blog/tags/openfga" hreflang="en"><link data-rh="true" rel="alternate" href="https://openfga.dev/pr-preview/pr-685/blog/tags/openfga" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/pr-preview/pr-685/blog/rss.xml" title="OpenFGA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pr-preview/pr-685/blog/atom.xml" title="OpenFGA Atom Feed">







<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"><link rel="stylesheet" href="/pr-preview/pr-685/assets/css/styles.240836ac.css">
<script src="/pr-preview/pr-685/assets/js/runtime~main.856515a3.js" defer="defer"></script>
<script src="/pr-preview/pr-685/assets/js/main.3b4f81d0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div class="CustomizedRoot"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/pr-preview/pr-685/"><div class="navbar__logo"><img src="/pr-preview/pr-685/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/pr-685/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-685/">Home</a><a class="navbar__item navbar__link" href="/pr-preview/pr-685/docs/fga">Docs</a><a class="navbar__item navbar__link" href="/pr-preview/pr-685/api/service">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-685/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openfga/openfga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-07">Fine Grained News - July 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/query-consistency-options-announcement">Query Consistency Options in OpenFGA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-06">Fine Grained News - June 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-05">Fine Grained News - May 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/list-users-announcement">List Users API</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-04">Fine Grained News - April 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/modular-models-announcement">Modular Models</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-03">Fine Grained News - March 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-02">Fine Grained News - February 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2024-01">Fine Grained News - January 2024</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/fine-grained-news-2023-12">Fine Grained News - December 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/conditional-tuples-announcement">Conditional Relationship Tuples for OpenFGA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pr-preview/pr-685/blog/kubecon-na-2023">Join the OpenFGA team at KubeCon NA 2023</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>4 posts tagged with &quot;openfga&quot;</h1><a href="/pr-preview/pr-685/blog/tags">View All Tags</a></header><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/pr-preview/pr-685/blog/query-consistency-options-announcement">Query Consistency Options in OpenFGA</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-07-30T00:00:00.000Z">July 30, 2024</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/aaguiarz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="/pr-preview/pr-685/img/blog/authors/andres.jpg" alt="Andres Aguiar"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/aaguiarz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Andres Aguiar</span></a></div><small class="authorTitle_nd0D" title="Product Manager">Product Manager</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>OpenFGA query APIs now allows to specify the desired consistency of query results. By default, OpenFGA does not use a cache. However, when caching is enabled, it applies to all requests. This means that any changes in permissions won&#x27;t be reflected in authorization checks during the cache TTL period.</p>
<p>The community expressed the need for flexibility in using the cache on a per-request basis. In response, starting with <a href="https://github.com/openfga/openfga/releases/tag/v1.5.7" target="_blank" rel="noopener noreferrer">OpenFGA v1.5.7</a>, all query APIs can accept a consistency parameter with the following values:</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>MINIMIZE_LATENCY (default)</td><td>OpenFGA will try to minimize latency (e.g. by making use of the cache)</td></tr><tr><td>HIGHER_CONSISTENCY</td><td>OpenFGA will try to optimize for stronger consistency (e.g. by bypassing cache)</td></tr></tbody></table>
<p>When <code>HIGHER_CONSISTENCY</code> is specified, OpenFGA reads directly from the database, even when the cache is enabled.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-it">How to use it?<a href="#how-to-use-it" class="hash-link" aria-label="Direct link to How to use it?" title="Direct link to How to use it?">​</a></h2>
<p>The new consistency parameter is available in OpenFGA starting <a href="https://github.com/openfga/openfga/releases/tag/v1.5.7" target="_blank" rel="noopener noreferrer">v1.5.7</a>.</p>
<p>The parameter is already exposed in the <a href="https://github.com/openfga/js-sdk/" target="_blank" rel="noopener noreferrer">Javascript SDK</a> (v0.6.2+) and the <a href="https://github.com/openfga/python-sdk/" target="_blank" rel="noopener noreferrer">Python SDK</a> (v0.6.1+). We&#x27;ll be adding support for it in the rest of the SDKs in the following weeks.</p>
<p>For more information on enabling the cache and best practices for specifying consistency values, refer to the <a href="https://openfga.dev/docs/interacting/consistency" target="_blank" rel="noopener noreferrer">documentation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-database-adapter-implementations">Custom database adapter implementations<a href="#custom-database-adapter-implementations" class="hash-link" aria-label="Direct link to Custom database adapter implementations" title="Direct link to Custom database adapter implementations">​</a></h2>
<p>For those with a custom database adapter for a multi-region database, the behavior of the HIGHER_CONSISTENCY parameter can be defined according to your needs. With an eventually consistent database (e.g., Dynamo DB) in a multi-region setup, there will be replication lag even if the cache is bypassed. If the database supports strong reads, you can choose to perform those at an extra cost. Otherwise, you can perform an eventually consistent read without providing full consistency semantics to the caller. In some other databases where you have Read/Write replicas, you may choose to go to the Write replica when the <code>HIGHER_CONSISTENCY</code> preference is selected.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-work">Future work<a href="#future-work" class="hash-link" aria-label="Direct link to Future work" title="Direct link to Future work">​</a></h2>
<p><a href="https://zanzibar.academy" target="_blank" rel="noopener noreferrer">Google Zanzibar</a> features a consistency token called <code>Zookies</code>, returned from write operations. This token can be stored in a resource table and specified in subsequent query API calls. We are considering introducing a similar feature in future releases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="we-want-your-feedback">We want your feedback!<a href="#we-want-your-feedback" class="hash-link" aria-label="Direct link to We want your feedback!" title="Direct link to We want your feedback!">​</a></h2>
<p>We want to learn how you use this API and how we can improve it!</p>
<p>Please reach out through our <a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer">community channels</a> with any questions or feedback.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/openfga">openfga</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/features">features</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/pr-preview/pr-685/blog/list-users-announcement">List Users API</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-30T00:00:00.000Z">May 30, 2024</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/miparnisari" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="/pr-preview/pr-685/img/blog/authors/miparnisari.jpg" alt="Maria Ines Parnisari"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/miparnisari" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Maria Ines Parnisari</span></a></div><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>Today we are launching a new API for OpenFGA: ListUsers.</p>
<p>This API will answer the question &quot;what users have relation X with object Y?&quot;. This will be useful, for example, in UIs that want to display the list of users that a resource has been shared with, e.g. the &quot;share&quot; dialog in Google Docs.</p>
<p>You can read more about it in the <a href="https://openfga.dev/api/service#/Relationship%20Queries/ListUsers" target="_blank" rel="noopener noreferrer">API docs</a> and the <a href="https://openfga.dev/docs/getting-started/perform-list-users" target="_blank" rel="noopener noreferrer">product documentation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-it">How to use it?<a href="#how-to-use-it" class="hash-link" aria-label="Direct link to How to use it?" title="Direct link to How to use it?">​</a></h2>
<p>ListUsers is available in OpenFGA starting with <a href="https://github.com/openfga/openfga/releases/tag/v1.5.4" target="_blank" rel="noopener noreferrer">v1.5.4</a>.</p>
<p>To be able to call this API, you must turn on this flag on the server: <code>--experimentals enable-list-users</code>. Be sure to also check out the various configuration flags that were added to control its behavior.</p>
<p>The new functionality is available on the latest versions of the <a href="https://github.com/openfga/java-sdk/" target="_blank" rel="noopener noreferrer">Java</a>, <a href="https://github.com/openfga/dotnet-sdk/" target="_blank" rel="noopener noreferrer">.NET</a>, <a href="https://github.com/openfga/go-sdk/" target="_blank" rel="noopener noreferrer">Go</a> and <a href="https://github.com/openfga/js-sdk/" target="_blank" rel="noopener noreferrer">Javascript SDK</a>, <a href="https://github.com/openfga/cli?tab=readme-ov-file#list-users" target="_blank" rel="noopener noreferrer">CLI</a> and <a href="https://marketplace.visualstudio.com/items?itemName=openfga.openfga-vscode" target="_blank" rel="noopener noreferrer">VS Code integration</a>.</p>
<p>We&#x27;ll be releasing support for the Python SDK soon.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="we-want-your-feedback">We want your feedback!<a href="#we-want-your-feedback" class="hash-link" aria-label="Direct link to We want your feedback!" title="Direct link to We want your feedback!">​</a></h2>
<p>We want to learn how you use this API and how we can improve it!</p>
<p>Please reach out through our <a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer">community channels</a> with any questions or feedback.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/openfga">openfga</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/features">features</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/pr-preview/pr-685/blog/modular-models-announcement">Modular Models</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-25T00:00:00.000Z">April 25, 2024</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ewanharris" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="/pr-preview/pr-685/img/blog/authors/ewan.jpg" alt="Ewan Harris"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/ewanharris" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Ewan Harris</span></a></div><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>Modular models aims to improve the model authoring experience when multiple teams are maintaining a model, such as:</p>
<ul>
<li>A model can grow large and difficult to understand</li>
<li>As more teams begin to contribute to a model, the ownership boundaries may not be clear and code review processes might not scale</li>
</ul>
<p>With modular models, a single model can be separated across multiple files allow grouping of types and conditions into modules. This means that a model can be organized more easily in terms of team or organizational structure. Used in conjunction with features such as <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners" target="_blank" rel="noopener noreferrer">GitHub</a>, <a href="https://docs.gitlab.com/ee/user/project/codeowners/" target="_blank" rel="noopener noreferrer">GitLab</a> or <a href="https://docs.gitea.com/usage/code-owners" target="_blank" rel="noopener noreferrer">Gitea&#x27;s</a> code owners, it should become easier to ensure the owners of a portion of your model are correctly assigned to review it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-it">How to use it?<a href="#how-to-use-it" class="hash-link" aria-label="Direct link to How to use it?" title="Direct link to How to use it?">​</a></h2>
<p>Modular models is available in the latest version of OpenFGA. To use it you need to:</p>
<ul>
<li>Update to the <a href="https://github.com/openfga/cli/releases/tag/v0.3.0" target="_blank" rel="noopener noreferrer">v0.3.0 release</a> of the CLI</li>
<li>Update to <a href="https://github.com/openfga/vscode-ext/releases/tag/v0.2.21" target="_blank" rel="noopener noreferrer">v0.2.21</a> of the VS Code Extension</li>
<li>Download <a href="https://github.com/openfga/openfga/releases/tag/v1.5.3" target="_blank" rel="noopener noreferrer">v1.5.3</a> of OpenFGA</li>
<li>Check out the modular models sample store in the <a href="https://github.com/openfga/sample-stores/tree/main/stores/modular" target="_blank" rel="noopener noreferrer">sample-stores repo</a></li>
<li>Review the <a href="https://openfga.dev/docs/modeling/modular-models" target="_blank" rel="noopener noreferrer">documentation for this feature</a></li>
<li>Check a <a href="https://youtu.be/oeqroL8-wCQ" target="_blank" rel="noopener noreferrer">demo video in Youtube</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s next?" title="Direct link to What&#x27;s next?">​</a></h2>
<p>Looking beyond the near term, modular models allows us to implement <a href="https://github.com/openfga/roadmap/issues/30" target="_blank" rel="noopener noreferrer">additional API authorization options for OpenFGA</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reach-out">Reach out!<a href="#reach-out" class="hash-link" aria-label="Direct link to Reach out!" title="Direct link to Reach out!">​</a></h2>
<p>We want to learn how you use this feature and how we can improve it!</p>
<p>Please reach out through our <a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer">community channels</a> with any questions or feedback.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/openfga">openfga</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/features">features</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/pr-preview/pr-685/blog/conditional-tuples-announcement">Conditional Relationship Tuples for OpenFGA</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-06T00:00:00.000Z">November 6, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/aaguiarz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="/pr-preview/pr-685/img/blog/authors/andres.jpg" alt="Andres Aguiar"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/aaguiarz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Andres Aguiar</span></a></div><small class="authorTitle_nd0D" title="Product Manager">Product Manager</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>Relationship Tuples are the facts that the OpenFGA evaluates to determine whether a user is permitted to access a resource.</p>
<p>The way tuples are considered when making authorization decisions in OpenFGA is guided by an authorization model, which employs concepts from Relationship-Based Access Control (ReBAC) to establish authorization policies. For instance, you might declare that users are allowed to view a document if they have permission to view its parent folder.</p>
<p>Although ReBAC offers a highly flexible method for structuring permissions, it encounters difficulties with defining permissions based on attributes that are not easily represented as relationships. Attributes such as “parent folder,” “department,” “region,” and “country” can be conceptualized as relationships between two entities. However, attributes like “IP address,” “time of day,” “team size limit,” or “maximum amount for a bank transfer” cannot be easily handled.</p>
<p>In our ongoing efforts to expand OpenFGA’s capacity for articulating a broader range of authorization policies, we are introducing <strong>Conditional Relationship Tuples</strong>. These allow for the specification of conditions under which a particular tuple is relevant when evaluating an authorization query.</p>
<p>Consider the following example, where we utilize Conditional Tuples to grant access for a user over a specified time duration. We stipulate that a user may be granted either unconditional access or access constrained to a certain time period:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">: </span><span class="token directly-assignable">[user, user with non_expired_grant]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain"> </span><span class="token condition">non_expired_grant</span><span class="token condition-params">(</span><span class="token condition-params condition-param">current_time:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">timestamp</span><span class="token condition-params">, </span><span class="token condition-params condition-param">grant_time:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">timestamp</span><span class="token condition-params">, </span><span class="token condition-params condition-param">grant_duration:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">duration</span><span class="token condition-params">) {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  current_time &lt; grant_time + grant_duration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we write the following tuples:</p>
<table><thead><tr><th>user</th><th>relation</th><th>object</th><th>condition</th></tr></thead><tbody><tr><td>user<!-- -->:bob</td><td>viewer</td><td>document:1</td><td></td></tr><tr><td>user<!-- -->:anne</td><td>viewer</td><td>document:1</td><td><code>name</code> : <code>non_expired_grant</code>, <code>context</code> : { <code>grant_time</code> : <code>2023-01-01T00:00:00Z</code>, <code>grant_duration</code> : <code>1h</code> }</td></tr></tbody></table>
<p>You&#x27;ll get the following results for the <a href="https://openfga.dev/api/service#/Relationship%20Queries/Check" target="_blank" rel="noopener noreferrer">Check</a> operations below:</p>
<table><thead><tr><th>user</th><th>relation</th><th>object</th><th>context</th><th>result</th></tr></thead><tbody><tr><td>user<!-- -->:bob</td><td>viewer</td><td>document:1</td><td></td><td><code>allowed</code> : <code>true</code></td></tr><tr><td>user<!-- -->:anne</td><td>viewer</td><td>document:1</td><td><code>current_time</code> : <code>2023-01-01T00:10:00Z</code></td><td><code>allowed</code> : <code>true</code></td></tr><tr><td>user<!-- -->:anne</td><td>viewer</td><td>document:1</td><td><code>current_time</code> : <code>2023-01-01T02:00:00Z</code></td><td><code>allowed</code> : <code>false</code></td></tr><tr><td>user<!-- -->:anne</td><td>viewer</td><td>document:1</td><td></td><td><code>error</code> : &quot;failed to evaluate relationship condition &#x27;non_expired_grant&#x27;: context is missing parameters &#x27;[current_time]&#x27;</td></tr></tbody></table>
<p>You&#x27;ll get the following results for the <a href="https://openfga.dev/api/service#/Relationship%20Queries/ListObjects" target="_blank" rel="noopener noreferrer">ListObjects</a> operations below:</p>
<table><thead><tr><th>user</th><th>relation</th><th>object</th><th>context</th><th>result</th></tr></thead><tbody><tr><td>user<!-- -->:anne</td><td>viewer</td><td>document:1</td><td><code>current_time</code> : <code>2023-01-01T00:10:00Z</code></td><td><code>objects</code>: <code>[ &quot;document:1&quot;]</code></td></tr><tr><td>user<!-- -->:anne</td><td>viewer</td><td>document:1</td><td></td><td><code>error</code>: &quot;failed to evaluate relationship condition &#x27;non_expired_grant&#x27;: tuple &#x27;document:1#viewer@user<!-- -->:anne<!-- -->&#x27; is missing context parameters &#x27;[current_time]&#x27;</td></tr></tbody></table>
<p>Note that:</p>
<ul>
<li><code>user:bob</code> will always get <code>allowed:true</code> as we have assigned as viewer unconditionally.</li>
<li><code>user:anne</code> will get <code>allowed:true</code> if the <code>current_time</code> is before the <code>grant_time</code> + <code>grant_duration</code> and <code>allowed:false</code> otherwise.</li>
<li>If you don&#x27;t provide the <code>current_time</code> in the context, the Check and ListObjects operations will fail.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use Cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases">​</a></h2>
<p>The <a href="https://github.com/openfga/sample-stores" target="_blank" rel="noopener noreferrer">OpenFGA Sample Stores repository</a> has several examples that take advantage of this new feature:</p>
<ul>
<li><a href="https://github.com/openfga/sample-stores/tree/main/stores/temporal-access" target="_blank" rel="noopener noreferrer">Granting access during a specific period of time (the use case explained above)</a>.</li>
<li><a href="https://github.com/openfga/sample-stores/tree/main/stores/ip-based-access" target="_blank" rel="noopener noreferrer">Allow access based on the user’s IP Address</a>.</li>
<li><a href="https://github.com/openfga/sample-stores/tree/main/stores/groups-resource-attributes" target="_blank" rel="noopener noreferrer">Granting access based on group membership and resource attributes</a>.</li>
<li><a href="https://github.com/openfga/sample-stores/tree/main/stores/advanced-entitlements" target="_blank" rel="noopener noreferrer">Allow access to specific features based on usage</a>.</li>
<li><a href="https://github.com/openfga/sample-stores/tree/main/stores/banking" target="_blank" rel="noopener noreferrer">Determine if a user can make a bank transfer based .on the transaction amount</a>.</li>
<li><a href="https://github.com/openfga/sample-stores/tree/main/stores/condition-data-types" target="_blank" rel="noopener noreferrer">Data types and operations supported in conditions</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-it">How to use it?<a href="#how-to-use-it" class="hash-link" aria-label="Direct link to How to use it?" title="Direct link to How to use it?">​</a></h2>
<p>Conditional Relationship Tuples are included in OpenFGA 1.4.0-rc1 version. You can run it by pulling it from docker:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> pull openfga/openfga:v1.4.0-rc1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">8080</span><span class="token plain">:8080 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">8081</span><span class="token plain">:8081 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">3000</span><span class="token plain">:3000 openfga/openfga:v1.4.0-rc1 run`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>OpenFGA has a rich ecosystem of developer tools. The following have been updated to support Conditional Relationship Tuples:</p>
<ul>
<li>
<p><a href="https://github.com/openfga/vscode-ext" target="_blank" rel="noopener noreferrer">Visual Studio Code integration</a> which provides syntax highlighting and model validations for conditions.</p>
</li>
<li>
<p>Beta versions of the <a href="https://www.npmjs.com/package/@openfga/sdk/v/0.3.0-beta.1" target="_blank" rel="noopener noreferrer">Javascript SDK</a> and the <a href="https://github.com/openfga/go-sdk/releases/tag/v0.3.0-beta.1" target="_blank" rel="noopener noreferrer">Go SDK</a>, which allows using the additional parameters.</p>
</li>
<li>
<p>The <a href="https://github.com/openfga/cli" target="_blank" rel="noopener noreferrer">OpenFGA CLI</a> allows validating models and runing tests that use conditional tuples. You can use it to test the new features by pointing to a <code>“.fga.yaml”</code> file that <a href="https://github.com/openfga/cli#run-tests-on-an-authorization-model" target="_blank" rel="noopener noreferrer">defines the tests you want to run</a>, without having to deploy OpenFGA.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What’s Next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What’s Next?" title="Direct link to What’s Next?">​</a></h2>
<p>We’ll address some limitations of the current implementation:</p>
<ul>
<li>The <a href="https://openfga.dev/api/service#/Relationship%20Queries/Expand" target="_blank" rel="noopener noreferrer">Expand API</a> does not consider conditions.</li>
<li>The Visual Studio Code integration is not validating the expressions in conditions.</li>
<li>The Playground does not let you add context for tuples and assertions. You should use the VS Code Extension + the FGA CLI to test your models for now.</li>
</ul>
<p>We&#x27;ll also improve ListObjects scenarios when it&#x27;s called with missing context.  For example, consider the following model that enables access only to documents with a specific status:</p>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_access</span><span class="token plain">: </span><span class="token directly-assignable">[user with docs_in_draft_status]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain"> </span><span class="token condition">docs_in_draft_status</span><span class="token condition-params">(</span><span class="token condition-params condition-param">status:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">string</span><span class="token condition-params">) {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  status == &quot;draft&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to list all the documents a user can view, you&#x27;ll need to know the status of all of those documents. Given you don&#x27;t know the documents the user has access too, you can&#x27;t send the status of those as a parameter to ListObjects.</p>
<p>Our goal is to return a structure that you can use to filter documents on your side, similar to:
<code>(document.id = ‘1’ and document.status = ‘draft’) or (document.id = ‘2’ and.status = draft)</code> <br>
This won’t scale to a large number of documents, but would be useful in some scenarios.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reach-out">Reach out!<a href="#reach-out" class="hash-link" aria-label="Direct link to Reach out!" title="Direct link to Reach out!">​</a></h2>
<p>We want to learn how you use this feature and how we can improve it!</p>
<p>Please reach out through our <a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer">community channels</a> with any questions or feedback.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/openfga">openfga</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pr-preview/pr-685/blog/tags/features">features</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><span class="footer__link-separator">·</span><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><span class="footer__link-separator">·</span><a href="https://github.com/openfga" target="_blank" rel="noopener noreferrer" class="header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><span class="footer__link-separator">·</span><a href="https://mastodon.social/@openfga" target="_blank" rel="me noopener noreferrer" class="header-social header-mastodon-link" aria-label="OpenFGA on Mastodon">Mastodon</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><a href="https://www.linuxfoundation.org/trademark-usage"><img src="/img/cncf-icon-white.svg" alt="CNCF" style="vertical-align:middle; margin-right:8px;"></a> &copy; 2024 <a href="https://www.linuxfoundation.org/" target="_blank">The Linux Foundation</a>®. All rights reserved. <span class="display-on-desktop">For a list of trademarks of The Linux Foundation, see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text" target="blank">Trademark Usage page</a>.</span></div></div></div></div></footer></div></div>
</body>
</html>