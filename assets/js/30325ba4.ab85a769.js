"use strict";(self.webpackChunkopenfga_dev=self.webpackChunkopenfga_dev||[]).push([[4374],{55874:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return u}});var o=n(87462),a=n(63366),i=(n(67294),n(3905)),r=n(80966),s=["components"],c={sidebar_position:1,slug:"/modeling/direct-access"},l="Direct Access",d={unversionedId:"content/modeling/direct-access",id:"content/modeling/direct-access",title:"Direct Access",description:"In this guide you will learn how to grant a  access to an  (such as a certain document) in .",source:"@site/docs/content/modeling/direct-access.mdx",sourceDirName:"content/modeling",slug:"/modeling/direct-access",permalink:"/docs/modeling/direct-access",draft:!1,editUrl:"https://github.com/openfga/openfga.dev/edit/main/docs/content/modeling/direct-access.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/modeling/direct-access"},sidebar:"docs",previous:{title:"Get Started with Modeling",permalink:"/docs/modeling/getting-started"},next:{title:"User Groups",permalink:"/docs/modeling/user-groups"}},p={},u=[{value:"Before you start",id:"before-you-start",level:2},{value:"<ProductName format={ProductNameFormat.ShortForm}/> Concepts",id:"-concepts",level:3},{value:"Step By Step",id:"step-by-step",level:2},{value:"01. Create A Relationship Tuple",id:"01-create-a-relationship-tuple",level:3},{value:"02. Check That The Relationship Exists",id:"02-check-that-the-relationship-exists",level:3},{value:"Related Sections",id:"related-sections",level:2}],m={toc:u};function h(e){var t=e.components,n=(0,a.Z)(e,s);return(0,i.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"direct-access"},"Direct Access"),(0,i.kt)(r.AH,{mdxType:"DocumentationNotice"}),(0,i.kt)("p",null,"In this guide you will learn how to grant a ",(0,i.kt)(r.uH,{section:"what-is-a-user",linkName:"user",mdxType:"ProductConcept"})," access to an ",(0,i.kt)(r.uH,{section:"what-is-an-object",linkName:"object",mdxType:"ProductConcept"})," (such as a certain document) in ",(0,i.kt)(r.rZ,{format:r.v7.ProductLink,mdxType:"ProductName"}),"."),(0,i.kt)(r.S1,{title:"When to use",appearance:"filled",description:(0,i.kt)("div",null,(0,i.kt)("p",null,"Granting access with ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuple",mdxType:"ProductConcept"}))," is a core part of ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"}),". Without them, any ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-check-request",linkName:"checks",mdxType:"ProductConcept"}))," will fail. You should use:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"authorization model")," to represent what ",(0,i.kt)("strong",{parentName:"li"},"relation"),"s are possible between the users and objects in the system"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"relationship tuples")," to represent the facts about the relationships between users and objects in your system."))),mdxType:"CardBox"}),(0,i.kt)("h2",{id:"before-you-start"},"Before you start"),(0,i.kt)("p",null,"In order to understand this guide correctly you must be familiar with some ",(0,i.kt)(r.uH,{mdxType:"ProductConcept"})," and know how to develop the things that we will list below."),(0,i.kt)("details",null,(0,i.kt)("summary",null,(0,i.kt)("p",null,"Assume that you have the following ",(0,i.kt)(r.uH,{section:"what-is-an-authorization-model",linkName:"authorization model",mdxType:"ProductConcept"}),".",(0,i.kt)("br",null),"\nYou have a ",(0,i.kt)(r.uH,{section:"what-is-a-type",linkName:"type",mdxType:"ProductConcept"})," called ",(0,i.kt)("inlineCode",{parentName:"p"},"document")," that can have a ",(0,i.kt)("inlineCode",{parentName:"p"},"viewer")," and/or an ",(0,i.kt)("inlineCode",{parentName:"p"},"editor"),".")),(0,i.kt)(r.lG,{configuration:{type_definitions:[{type:"document",relations:{viewer:{this:{}},editor:{this:{}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("hr",null),(0,i.kt)("p",null,"In addition, you will need to know the following:"),(0,i.kt)("h3",{id:"-concepts"},(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," Concepts"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)(r.uH,{section:"what-is-a-type",linkName:"Type",mdxType:"ProductConcept"}),": a class of objects that have similar characteristics"),(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)(r.uH,{section:"what-is-a-user",linkName:"User",mdxType:"ProductConcept"}),": an entity in the system that can be related to an object"),(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)(r.uH,{section:"what-is-a-relation",linkName:"Relation",mdxType:"ProductConcept"}),": is a string defined in the type definition of an authorization model that defines the possibility of a relationship between objects of this type and other users in the system"),(0,i.kt)("li",{parentName:"ul"},"An ",(0,i.kt)(r.uH,{section:"what-is-an-object",linkName:"Object",mdxType:"ProductConcept"}),": represents an entity in the system. Users' relationships to it can be define through relationship tuples and the authorization model"),(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)(r.uH,{section:"what-is-a-relationship-tuple",linkName:"Relationship Tuple",mdxType:"ProductConcept"}),": a grouping consisting of a user, a relation and an object stored in ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})))),(0,i.kt)(r.XQ,{mdxType:"Playground"}),(0,i.kt)("h2",{id:"step-by-step"},"Step By Step"),(0,i.kt)("p",null,"For our applications to understand that ",(0,i.kt)("strong",{parentName:"p"},"user x")," has access to ",(0,i.kt)("strong",{parentName:"p"},"document y"),", we need to provide ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," that information through ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuples",mdxType:"ProductConcept"})),".\nEach ",(0,i.kt)("em",{parentName:"p"},"relationship tuple")," has three basic parameters, a ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-user",linkName:"user",mdxType:"ProductConcept"})),", a ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-relation",linkName:"relation",mdxType:"ProductConcept"}))," and an ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-an-object",linkName:"object",mdxType:"ProductConcept"})),"."),(0,i.kt)("h3",{id:"01-create-a-relationship-tuple"},"01. Create A Relationship Tuple"),(0,i.kt)("p",null,"Let us add a ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuple",mdxType:"ProductConcept"}))," to indicate that ",(0,i.kt)("strong",{parentName:"p"},"bob")," who is an ",(0,i.kt)("inlineCode",{parentName:"p"},"editor")," of ",(0,i.kt)("strong",{parentName:"p"},"document:meeting_notes.doc"),". This is represented by adding the following:"),(0,i.kt)(r.Gb,{relationshipTuples:[{user:"bob",relation:"editor",object:"document:meeting_notes.doc"}],mdxType:"WriteRequestViewer"}),(0,i.kt)("h3",{id:"02-check-that-the-relationship-exists"},"02. Check That The Relationship Exists"),(0,i.kt)("p",null,"Once that ",(0,i.kt)("em",{parentName:"p"},"relationship tuple")," is added to ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"}),", we can ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)(r.uH,{section:"what-is-a-check-request",linkName:"check",mdxType:"ProductConcept"}))," if the relationship is valid by asking the following: ",(0,i.kt)("strong",{parentName:"p"},'"is bob an editor of document:meeting_notes.doc?"')),(0,i.kt)(r.uT,{user:"bob",relation:"editor",object:"document:meeting_notes.doc",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"If we were to ",(0,i.kt)("em",{parentName:"p"},"check")," the following: ",(0,i.kt)("strong",{parentName:"p"},'"is bob a viewer of document:meeting_notes.doc?"')," it would return ",(0,i.kt)("strong",{parentName:"p"},"false")," since that ",(0,i.kt)("em",{parentName:"p"},"relationship tuple")," does not exist within ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," yet."),(0,i.kt)(r.uT,{user:"bob",relation:"viewer",object:"document:meeting_notes.doc",allowed:!1,mdxType:"CheckRequestViewer"}),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Note:")," When creating relationship tuples for ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," make sure to use unique ids for each object and user within your application domain. We're using first names and simple ids to just illustrate an easy-to-follow example."))),(0,i.kt)("h2",{id:"related-sections"},"Related Sections"),(0,i.kt)(r.$q,{description:"Check the following sections for more on how to model with {ProductName}.",relatedLinks:[{title:"{ProductName} Concepts",description:"Learn about the {ProductName} Concepts.",link:"../concepts",id:"../fga-concepts"},{title:"Modeling: Getting Started",description:"Learn about how to get started with modeling.",link:"./getting-started",id:"./getting-started"},{title:"Configuration Language",description:"Learn about {ProductName} Configuration Language.",link:"../configuration-language",id:"../configuration-language"}],mdxType:"RelatedSection"}))}h.isMDXComponent=!0}}]);