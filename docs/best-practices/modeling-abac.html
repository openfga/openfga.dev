<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content/best-practices/modeling-abac" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Modeling Attribute Based Access Control | OpenFGA</title><meta data-rh="true" http-equiv="Content-Security-Policy" content="default-src &#x27;none&#x27;; base-uri &#x27;self&#x27;; block-all-mixed-content; worker-src &#x27;self&#x27;; child-src www.youtube-nocookie.com; connect-src &#x27;self&#x27; https://raw.githubusercontent.com https://s3.amazonaws.com https://cdn.cookielaw.org https://privacyportal.onetrust.com https://heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://forms.hscollectedforms.net https://proxy.kapa.ai https://kapa-widget-proxy-la7dkmplpq-uc.a.run.app https://metrics.kapa.ai https://www.google.com/recaptcha/ https://hcaptcha.com https://*.hcaptcha.com ; font-src &#x27;self&#x27; https://fonts.googleapis.com https://fonts.gstatic.com; form-action &#x27;none&#x27;; frame-src www.youtube-nocookie.com https://www.google.com https://hcaptcha.com https://*.hcaptcha.com; img-src &#x27;self&#x27; data: https://openfga.dev https://pbs.twimg.com https://docs.github.com https://heapanalytics.com https://forms.hsforms.com https://track.hubspot.com ; media-src &#x27;self&#x27;; object-src &#x27;none&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://cdn.cookielaw.org https://geolocation.onetrust.com https://cdn.heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://widget.kapa.ai https://www.google.com https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://hcaptcha.com https://*.hcaptcha.com; style-src &#x27;unsafe-inline&#x27; &#x27;self&#x27; https://fonts.googleapis.com https://hcaptcha.com https://*.hcaptcha.com;"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openfga.dev/docs/best-practices/modeling-abac"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="OpenFGA, open source, fine-grained-authorization, fine grained authorization, Zanzibar"><meta data-rh="true" property="og:image" content="https://openfga.dev/img/og-rich-embed.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Modeling Attribute Based Access Control | OpenFGA"><meta data-rh="true" name="description" content="Learn how to model Attribute-Based Access Control (ABAC) patterns using stored and dynamic attributes in OpenFGA."><meta data-rh="true" property="og:description" content="Learn how to model Attribute-Based Access Control (ABAC) patterns using stored and dynamic attributes in OpenFGA."><link data-rh="true" rel="icon" href="/img/openfga-icon.svg"><link data-rh="true" rel="canonical" href="https://openfga.dev/docs/best-practices/modeling-abac"><link data-rh="true" rel="alternate" href="https://openfga.dev/docs/best-practices/modeling-abac" hreflang="en"><link data-rh="true" rel="alternate" href="https://openfga.dev/docs/best-practices/modeling-abac" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Best Practices","item":"https://openfga.dev/docs/best-practices"},{"@type":"ListItem","position":2,"name":"Modeling ABAC","item":"https://openfga.dev/docs/best-practices/modeling-abac"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenFGA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenFGA Atom Feed">








<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="c4285f4c-6c2b-42ed-91c6-e772392372ef" data-project-name="OpenFGA" data-project-color="#79ED83" data-project-logo="https://openfga.dev/img/openfga_logo.svg" data-button-hide="true" data-modal-override-open-selector=".ask-ai-button" data-modal-open-on-command-k="true" async></script>
<script src="https://js.hs-scripts.com/24392211.js" charset="UTF-8" id="hs-script-loader" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.a145c095.css">
<script src="/assets/js/runtime~main.95eb9cf5.js" defer="defer"></script>
<script src="/assets/js/main.ad81a1fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div class="CustomizedRoot"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/fga">Docs</a><a class="navbar__item navbar__link" href="/api/service">API</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/openfga/openfga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><div class="navbar__item ask-ai-nav-item"><button class="ask-ai-button ask-ai-nav-button" aria-label="Ask AI">Ask AI</button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/fga"><span title="What is OpenFGA" class="linkLabel_WmDU">What is OpenFGA</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/authorization-concepts"><span title="Authorization Concepts" class="linkLabel_WmDU">Authorization Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts"><span title="OpenFGA Concepts" class="linkLabel_WmDU">OpenFGA Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/configuration-language"><span title="Configuration Language" class="linkLabel_WmDU">Configuration Language</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/community"><span title="Community" class="linkLabel_WmDU">Community</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/getting-started/setup-openfga/overview"><span title="Setup OpenFGA" class="categoryLinkLabel_W154">Setup OpenFGA</span></a><button aria-label="Expand sidebar category &#x27;Setup OpenFGA&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-sdk"><span title="Install SDK Client" class="linkLabel_WmDU">Install SDK Client</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/create-store"><span title="Create a Store" class="linkLabel_WmDU">Create a Store</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-sdk-client"><span title="Setup SDK Client for Store" class="linkLabel_WmDU">Setup SDK Client for Store</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/configure-model"><span title="Configure Authorization Model" class="linkLabel_WmDU">Configure Authorization Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/update-tuples"><span title="Update Relationship Tuples" class="linkLabel_WmDU">Update Relationship Tuples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/perform-check"><span title="Perform a Check" class="linkLabel_WmDU">Perform a Check</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/perform-list-objects"><span title="Perform a List Objects Request" class="linkLabel_WmDU">Perform a List Objects Request</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/perform-list-users"><span title="Perform a List Users Request" class="linkLabel_WmDU">Perform a List Users Request</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/cli"><span title="Use the FGA CLI" class="linkLabel_WmDU">Use the FGA CLI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/framework"><span title="Integrate Within a Framework" class="linkLabel_WmDU">Integrate Within a Framework</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/immutable-models"><span title="Immutable Authorization Models" class="linkLabel_WmDU">Immutable Authorization Models</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/tuples-api-best-practices"><span title="Implementation Best Practices" class="linkLabel_WmDU">Implementation Best Practices</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/configure-telemetry"><span title="Configure SDK Client Telemetry" class="linkLabel_WmDU">Configure SDK Client Telemetry</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/modeling"><span title="Modeling Guides" class="categoryLinkLabel_W154">Modeling Guides</span></a><button aria-label="Expand sidebar category &#x27;Modeling Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/interacting"><span title="Interacting with the API" class="categoryLinkLabel_W154">Interacting with the API</span></a><button aria-label="Expand sidebar category &#x27;Interacting with the API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/best-practices"><span title="Best Practices" class="categoryLinkLabel_W154">Best Practices</span></a><button aria-label="Collapse sidebar category &#x27;Best Practices&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/adoption-patterns"><span title="Adoption Patterns" class="linkLabel_WmDU">Adoption Patterns</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/modeling-design-principles"><span title="Authorization Model Design Principles" class="linkLabel_WmDU">Authorization Model Design Principles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/best-practices/modeling-abac"><span title="Modeling ABAC" class="linkLabel_WmDU">Modeling ABAC</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/modeling-roles"><span title="Modeling Roles" class="linkLabel_WmDU">Modeling Roles</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/source-of-truth"><span title="Source of Truth" class="linkLabel_WmDU">Source of Truth</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/running-in-production"><span title="Running OpenFGA in Production" class="linkLabel_WmDU">Running OpenFGA in Production</span></a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/best-practices"><span>Best Practices</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Modeling ABAC</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Modeling ABAC with <!-- -->OpenFGA</h1></header>
<p>Attribute-Based Access Control (ABAC) extends traditional relationship-based access control by incorporating attributes into authorization decisions. While Role-Based Access Control (RBAC) answers &quot;does this user have this role?&quot;, ABAC answers questions like &quot;does this user have this role AND is their email verified?&quot; or &quot;can this user access this resource given their current session context?&quot;.</p>
<p>With <!-- -->OpenFGA<!-- -->, you can model ABAC patterns using attributes that are stored in the system or attributes that are provided dynamically with each authorization request.</p>
<p>This guide covers two main approaches:</p>
<ol>
<li class=""><strong>Stored attributes</strong>: Attributes persisted in <!-- -->OpenFGA<!-- --> as part of your relationship data</li>
<li class=""><strong>Request-time attributes</strong>: Dynamic attributes sent with each authorization check request</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stored-attribute-data">Stored Attribute Data<a href="#stored-attribute-data" class="hash-link" aria-label="Direct link to Stored Attribute Data" title="Direct link to Stored Attribute Data" translate="no">​</a></h2>
<p>When attributes are relatively static and can be stored alongside your relationship data, you can model them directly in <!-- -->OpenFGA<!-- -->. This approach works well for attributes like &quot;email verified&quot;, &quot;SSO enabled&quot;, or &quot;account tier&quot;.</p>
<p>Consider a scenario where you want to allow users to perform an action only if their organization has SSO enabled. Below are three patterns for modeling this requirement.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="modeling-attributes-as-relations">Modeling Attributes as Relations<a href="#modeling-attributes-as-relations" class="hash-link" aria-label="Direct link to Modeling Attributes as Relations" title="Direct link to Modeling Attributes as Relations" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-user-as-a-boolean-flag">Using <code>user:*</code> as a Boolean Flag<a href="#using-user-as-a-boolean-flag" class="hash-link" aria-label="Direct link to using-user-as-a-boolean-flag" title="Direct link to using-user-as-a-boolean-flag" translate="no">​</a></h4>
<p>The simplest approach for boolean attributes is using the <a class="" href="/docs/modeling/public-access">Public Access</a> pattern. By assigning <code>user:*</code> to a relation, you effectively create a boolean flag that applies to all users.</p>
<p><strong>When to use this approach:</strong></p>
<ul>
<li class="">You need a simple true/false flag</li>
<li class="">The attribute applies uniformly to all users in a context</li>
<li class="">You want minimal tuple overhead</li>
</ul>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain">: |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain"> : </span><span class="token directly-assignable">[user]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">sso_enabled</span><span class="token plain"> : </span><span class="token directly-assignable">[user:*]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_use_sso</span><span class="token plain"> : sso_enabled </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"> member</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tuples:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: member</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tests:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        can_use_sso: true</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-self-relations">Using Self-Relations<a href="#using-self-relations" class="hash-link" aria-label="Direct link to Using Self-Relations" title="Direct link to Using Self-Relations" translate="no">​</a></h4>
<p>An alternative approach is to use a self-referential relation, where an object points to itself to indicate an attribute is set. This pattern makes the relationship semantics more explicit.</p>
<p><strong>When to use this approach:</strong></p>
<ul>
<li class="">You want clearer semantics about what the attribute represents</li>
<li class="">The attribute is a property of the object itself rather than a universal grant</li>
<li class="">You prefer explicit object references over wildcards</li>
</ul>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain">: |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain"> : </span><span class="token directly-assignable">[user]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">sso_enabled</span><span class="token plain"> : </span><span class="token directly-assignable">[organization]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_use_sso</span><span class="token plain"> : member </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tuples:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: member</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tests:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        can_use_sso: true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storing-attributes-in-conditional-tuple-context">Storing Attributes in Conditional Tuple Context<a href="#storing-attributes-in-conditional-tuple-context" class="hash-link" aria-label="Direct link to Storing Attributes in Conditional Tuple Context" title="Direct link to Storing Attributes in Conditional Tuple Context" translate="no">​</a></h3>
<p>For attributes that require typed values beyond simple booleans, you can store the attribute value directly in the condition context of a relationship tuple. This approach combines the relationship with its associated attribute data.</p>
<p><strong>When to use this approach:</strong></p>
<ul>
<li class="">You need typed attribute values (strings, numbers, etc.)</li>
<li class="">The attribute is tightly coupled to a specific relationship</li>
<li class="">You want to avoid additional tuples for attribute storage</li>
</ul>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain">: |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">member</span><span class="token plain"> : </span><span class="token directly-assignable">[user]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">sso_enabled</span><span class="token plain"> : </span><span class="token directly-assignable">[organization#member with sso_enabled]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">can_use_sso</span><span class="token plain"> : sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain"> </span><span class="token condition">sso_enabled</span><span class="token condition-params">(</span><span class="token condition-params condition-param">sso_enabled:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">bool</span><span class="token condition-params">) {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tuples:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: organization:acme#member</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name: sso_enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sso_enabled : true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: member</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tests:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        can_use_sso: true</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="request-time-attribute-data">Request-Time Attribute Data<a href="#request-time-attribute-data" class="hash-link" aria-label="Direct link to Request-Time Attribute Data" title="Direct link to Request-Time Attribute Data" translate="no">​</a></h2>
<p>Some attributes cannot be stored because they are dynamic and change with each request. Common examples include the current time, client IP address, or the user&#x27;s current session context. For these scenarios, you provide the attribute values at request time.</p>
<p>For time-based, IP-based conditions and more, see the <a class="" href="/docs/modeling/conditions">Conditions documentation</a> for detailed examples.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="multi-organization-session-context">Multi-Organization Session Context<a href="#multi-organization-session-context" class="hash-link" aria-label="Direct link to Multi-Organization Session Context" title="Direct link to Multi-Organization Session Context" translate="no">​</a></h3>
<p>A common use case is when users can authenticate to multiple organizations but should only access resources belonging to their currently active organization. When accessing content, you need to verify the content belongs to the organization the user is currently logged into.</p>
<p>You can achieve this with either contextual tuples or conditional relationship tuples.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-contextual-tuples">Using Contextual Tuples<a href="#using-contextual-tuples" class="hash-link" aria-label="Direct link to Using Contextual Tuples" title="Direct link to Using Contextual Tuples" translate="no">​</a></h4>
<p>With this approach, you add a relation (e.g., <code>user_in_context</code>) that is not stored but sent as a contextual tuple with each request. This contextual tuple represents the user&#x27;s current session context.</p>
<p><strong>When to use this approach:</strong></p>
<ul>
<li class="">Session context is determined entirely at request time</li>
<li class="">You want to keep stored tuples simple and context-free</li>
<li class="">The context applies across multiple relation checks</li>
</ul>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain">: |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">user_in_context</span><span class="token plain">: </span><span class="token directly-assignable">[user]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">project_editor</span><span class="token plain">: </span><span class="token directly-assignable">[user]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"> user_in_context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">project_viewer</span><span class="token plain">: </span><span class="token directly-assignable">[user]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"> user_in_context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">organization</span><span class="token plain">: </span><span class="token directly-assignable">[organization]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">editor</span><span class="token plain">: project_editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">: project_viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tuples:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: project_editor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: project:acme-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: project_editor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:contoso</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: organization:contoso</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: project:contoso-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tests:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: Anne can access the acme-website when she&#x27;s in context of the acme organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tuples:</span><span class="token comment" style="color:rgb(98, 114, 164)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">      # This contextual tuple represents Anne&#x27;s current session</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        relation: user_in_context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:acme-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:contoso-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: Anne can access the contoso-website when she&#x27;s in context of the contoso organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tuples:</span><span class="token comment" style="color:rgb(98, 114, 164)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">      # This contextual tuple represents Anne&#x27;s current session</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        relation: user_in_context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: organization:contoso</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:acme-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:contoso-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: true</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-conditional-relationship-tuples">Using Conditional Relationship Tuples<a href="#using-conditional-relationship-tuples" class="hash-link" aria-label="Direct link to Using Conditional Relationship Tuples" title="Direct link to Using Conditional Relationship Tuples" translate="no">​</a></h4>
<p>Instead of adding contextual tuples, you can attach conditions to your stored relationship tuples and provide the context values at request time. The condition compares stored values against request-time values.</p>
<p><strong>When to use this approach:</strong></p>
<ul>
<li class="">You want to avoid sending contextual tuples with every request</li>
<li class="">The condition logic involves comparing stored and request-time values</li>
<li class="">You prefer conditions over additional relations in your model</li>
</ul>
<div class="language-dsl.openfga codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dsl.openfga codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain">: |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">schema</span><span class="token plain"> 1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">project_editor</span><span class="token plain">: </span><span class="token directly-assignable">[user with in_context]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">project_viewer</span><span class="token plain">: </span><span class="token directly-assignable">[user with in_context]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type">project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">relations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">organization</span><span class="token plain">: </span><span class="token directly-assignable">[organization]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">editor</span><span class="token plain">: project_editor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token plain"> </span><span class="token relation">viewer</span><span class="token plain">: project_viewer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain"> </span><span class="token condition">in_context</span><span class="token condition-params">(</span><span class="token condition-params condition-param">project_org:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">string</span><span class="token condition-params">, </span><span class="token condition-params condition-param">user_org:</span><span class="token condition-params"> </span><span class="token condition-params condition-param-type">string</span><span class="token condition-params">) {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      project_org == user_org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tuples:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: project_editor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name: in_context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        project_org: &quot;acme&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: project_editor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: organization:contoso</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">condition</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name: in_context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        project_org: &quot;contoso&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: organization:acme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: project:acme-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - user: organization:contoso</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    relation: organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    object: project:contoso-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tests:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: Anne can access the acme-website when she&#x27;s in context of the acme organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:acme-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          user_org: &quot;acme&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:contoso-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          user_org: &quot;acme&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: Anne can access the contoso-website when she&#x27;s in context of the contoso organization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    check:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:acme-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          user_org: &quot;contoso&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - user: user:anne</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        object: project:contoso-website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          user_org: &quot;contoso&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        assertions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            editor: true</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="choosing-the-right-approach">Choosing the Right Approach<a href="#choosing-the-right-approach" class="hash-link" aria-label="Direct link to Choosing the Right Approach" title="Direct link to Choosing the Right Approach" translate="no">​</a></h2>
<table><thead><tr><th>Approach</th><th>Best For</th><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td><code>user:*</code> boolean flag</td><td>Simple on/off attributes</td><td>Minimal tuples, easy to understand</td><td>Limited to boolean values</td></tr><tr><td>Self-relations</td><td>Object-level properties</td><td>Clear semantics, explicit references</td><td>Requires self-referential tuple</td></tr><tr><td>Contextual tuples</td><td>Dynamic session context</td><td>Context-free stored data, flexible</td><td>Must send tuples with every request</td></tr><tr><td>Conditional relationship tuples</td><td>Comparing stored vs. request values</td><td>No extra tuples per request, powerful conditions</td><td>Condition logic can become complex</td></tr></tbody></table>
<p>When deciding between these approaches, consider:</p>
<ul>
<li class=""><strong>Data volatility</strong>: Use stored attributes for stable data, request-time attributes for dynamic data</li>
<li class=""><strong>Model complexity</strong>: Start with simpler patterns (like <code>user:*</code>) and evolve to more complex ones as needed</li>
<li class=""><strong>Attribute types</strong>: Use conditions when you need typed values beyond booleans</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-sections">Related Sections<a href="#related-sections" class="hash-link" aria-label="Direct link to Related Sections" title="Direct link to Related Sections" translate="no">​</a></h2>
<div><div class="documentation-related-section-description_Un_N"><span>Check out these related resources for more information about ABAC patterns in OpenFGA</span></div><div class="column-layout-3_YXBy"><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Conditions</span><p class="documentation-card-box-description_u7_j">Learn how to use conditions for time-based, IP-based, and other dynamic checks.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/docs/modeling/conditions">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Contextual Tuples</span><p class="documentation-card-box-description_u7_j">Understand how to send dynamic relationship data with each request.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/docs/interacting/contextual-tuples">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Public Access</span><p class="documentation-card-box-description_u7_j">Learn about the user:* pattern for granting access to everyone.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/docs/modeling/public-access">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Modular Authorization Models</span><p class="documentation-card-box-description_u7_j">Learn how to break down your authorization model into modules.</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/docs/modeling/modular-models">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/openfga/openfga.dev/edit/main/docs/content/best-practices/modeling-abac.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/best-practices/modeling-design-principles"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Authorization Model Design Principles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/best-practices/modeling-roles"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Modeling Roles</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#stored-attribute-data" class="table-of-contents__link toc-highlight">Stored Attribute Data</a><ul><li><a href="#modeling-attributes-as-relations" class="table-of-contents__link toc-highlight">Modeling Attributes as Relations</a></li><li><a href="#storing-attributes-in-conditional-tuple-context" class="table-of-contents__link toc-highlight">Storing Attributes in Conditional Tuple Context</a></li></ul></li><li><a href="#request-time-attribute-data" class="table-of-contents__link toc-highlight">Request-Time Attribute Data</a><ul><li><a href="#multi-organization-session-context" class="table-of-contents__link toc-highlight">Multi-Organization Session Context</a></li></ul></li><li><a href="#choosing-the-right-approach" class="table-of-contents__link toc-highlight">Choosing the Right Approach</a></li><li><a href="#related-sections" class="table-of-contents__link toc-highlight">Related Sections</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="footer__link-item header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><span class="footer__link-separator">·</span><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><span class="footer__link-separator">·</span><a href="https://github.com/openfga" target="_blank" rel="noopener noreferrer" class="footer__link-item header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><span class="footer__link-separator">·</span><a href="https://mastodon.social/@openfga" target="_blank" rel="me noopener noreferrer" class="footer__link-item header-social header-mastodon-link" aria-label="OpenFGA on Mastodon">Mastodon</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><a href="https://www.linuxfoundation.org/trademark-usage"><img src="/img/cncf-icon-white.svg" alt="CNCF" style="vertical-align:middle; margin-right:8px;"></a> &copy; 2026 <a href="https://www.linuxfoundation.org/" target="_blank">The Linux Foundation</a>®. All rights reserved. <span class="display-on-desktop">For a list of trademarks of The Linux Foundation, see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text" target="blank">Trademark Usage page</a>.</span></div></div></div></div></footer></div></div>
</body>
</html>