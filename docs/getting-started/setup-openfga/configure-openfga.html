<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content/getting-started/setup-openfga/configure-openfga" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Configuring OpenFGA | OpenFGA</title><meta data-rh="true" http-equiv="Content-Security-Policy" content="default-src &#x27;none&#x27;; base-uri &#x27;self&#x27;; block-all-mixed-content; worker-src &#x27;self&#x27;; child-src www.youtube-nocookie.com; connect-src &#x27;self&#x27; https://raw.githubusercontent.com https://s3.amazonaws.com https://cdn.cookielaw.org https://privacyportal.onetrust.com https://heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://forms.hscollectedforms.net https://proxy.kapa.ai https://kapa-widget-proxy-la7dkmplpq-uc.a.run.app https://metrics.kapa.ai https://www.google.com/recaptcha/ https://hcaptcha.com https://*.hcaptcha.com ; font-src &#x27;self&#x27; https://fonts.googleapis.com https://fonts.gstatic.com; form-action &#x27;none&#x27;; frame-src www.youtube-nocookie.com https://www.google.com https://hcaptcha.com https://*.hcaptcha.com; img-src &#x27;self&#x27; data: https://openfga.dev https://pbs.twimg.com https://docs.github.com https://heapanalytics.com https://forms.hsforms.com https://track.hubspot.com ; media-src &#x27;self&#x27;; object-src &#x27;none&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://cdn.cookielaw.org https://geolocation.onetrust.com https://cdn.heapanalytics.com https://js.hs-scripts.com https://api.github.com https://js.hscollectedforms.net https://js.hs-analytics.net https://js.hs-banner.com https://widget.kapa.ai https://www.google.com https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://hcaptcha.com https://*.hcaptcha.com; style-src &#x27;unsafe-inline&#x27; &#x27;self&#x27; https://fonts.googleapis.com https://hcaptcha.com https://*.hcaptcha.com;"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openfga.dev/docs/getting-started/setup-openfga/configure-openfga"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="OpenFGA, open source, fine-grained-authorization, fine grained authorization, Zanzibar"><meta data-rh="true" property="og:image" content="https://openfga.dev/img/og-rich-embed.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuring OpenFGA | OpenFGA"><meta data-rh="true" name="description" content="Configuring an OpenFGA Server"><meta data-rh="true" property="og:description" content="Configuring an OpenFGA Server"><link data-rh="true" rel="icon" href="/img/openfga-icon.svg"><link data-rh="true" rel="canonical" href="https://openfga.dev/docs/getting-started/setup-openfga/configure-openfga"><link data-rh="true" rel="alternate" href="https://openfga.dev/docs/getting-started/setup-openfga/configure-openfga" hreflang="en"><link data-rh="true" rel="alternate" href="https://openfga.dev/docs/getting-started/setup-openfga/configure-openfga" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Getting Started","item":"https://openfga.dev/docs/getting-started"},{"@type":"ListItem","position":2,"name":"Setup OpenFGA","item":"https://openfga.dev/docs/getting-started/setup-openfga/overview"},{"@type":"ListItem","position":3,"name":"Configure OpenFGA","item":"https://openfga.dev/docs/getting-started/setup-openfga/configure-openfga"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenFGA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenFGA Atom Feed">








<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="c4285f4c-6c2b-42ed-91c6-e772392372ef" data-project-name="OpenFGA" data-project-color="#79ED83" data-project-logo="https://openfga.dev/img/openfga_logo.svg" data-button-hide="true" data-modal-override-open-selector=".ask-ai-button" data-modal-open-on-command-k="true" async></script>
<script src="https://js.hs-scripts.com/24392211.js" charset="UTF-8" id="hs-script-loader" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.a145c095.css">
<script src="/assets/js/runtime~main.8b86fa18.js" defer="defer"></script>
<script src="/assets/js/main.ad81a1fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div class="CustomizedRoot"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/openfga_logo.svg" alt="OpenFGA" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/fga">Docs</a><a class="navbar__item navbar__link" href="/api/service">API</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/openfga/openfga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><div class="navbar__item ask-ai-nav-item"><button class="ask-ai-button ask-ai-nav-button" aria-label="Ask AI">Ask AI</button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/fga"><span title="What is OpenFGA" class="linkLabel_WmDU">What is OpenFGA</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/authorization-concepts"><span title="Authorization Concepts" class="linkLabel_WmDU">Authorization Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts"><span title="OpenFGA Concepts" class="linkLabel_WmDU">OpenFGA Concepts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/configuration-language"><span title="Configuration Language" class="linkLabel_WmDU">Configuration Language</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/community"><span title="Community" class="linkLabel_WmDU">Community</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/getting-started/setup-openfga/overview"><span title="Setup OpenFGA" class="categoryLinkLabel_W154">Setup OpenFGA</span></a><button aria-label="Collapse sidebar category &#x27;Setup OpenFGA&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/setup-openfga/configure-openfga"><span title="Configure OpenFGA" class="linkLabel_WmDU">Configure OpenFGA</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-openfga/configuration"><span title="Configuration Options" class="linkLabel_WmDU">Configuration Options</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-openfga/docker"><span title="üê≥ Docker" class="linkLabel_WmDU">üê≥ Docker</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-openfga/kubernetes"><span title="‚ò∏Ô∏è Kubernetes" class="linkLabel_WmDU">‚ò∏Ô∏è Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-openfga/access-control"><span title="üõ°Ô∏èAccess Control" class="linkLabel_WmDU">üõ°Ô∏èAccess Control</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-openfga/playground"><span title="Playground" class="linkLabel_WmDU">Playground</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-openfga/reporting-runtime-issues"><span title="Reporting Runtime Issues" class="linkLabel_WmDU">Reporting Runtime Issues</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-sdk"><span title="Install SDK Client" class="linkLabel_WmDU">Install SDK Client</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/create-store"><span title="Create a Store" class="linkLabel_WmDU">Create a Store</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup-sdk-client"><span title="Setup SDK Client for Store" class="linkLabel_WmDU">Setup SDK Client for Store</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/configure-model"><span title="Configure Authorization Model" class="linkLabel_WmDU">Configure Authorization Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/update-tuples"><span title="Update Relationship Tuples" class="linkLabel_WmDU">Update Relationship Tuples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/perform-check"><span title="Perform a Check" class="linkLabel_WmDU">Perform a Check</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/perform-list-objects"><span title="Perform a List Objects Request" class="linkLabel_WmDU">Perform a List Objects Request</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/perform-list-users"><span title="Perform a List Users Request" class="linkLabel_WmDU">Perform a List Users Request</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/cli"><span title="Use the FGA CLI" class="linkLabel_WmDU">Use the FGA CLI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/framework"><span title="Integrate Within a Framework" class="linkLabel_WmDU">Integrate Within a Framework</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/immutable-models"><span title="Immutable Authorization Models" class="linkLabel_WmDU">Immutable Authorization Models</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/tuples-api-best-practices"><span title="Implementation Best Practices" class="linkLabel_WmDU">Implementation Best Practices</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/configure-telemetry"><span title="Configure SDK Client Telemetry" class="linkLabel_WmDU">Configure SDK Client Telemetry</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/modeling"><span title="Modeling Guides" class="categoryLinkLabel_W154">Modeling Guides</span></a><button aria-label="Expand sidebar category &#x27;Modeling Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/interacting"><span title="Interacting with the API" class="categoryLinkLabel_W154">Interacting with the API</span></a><button aria-label="Expand sidebar category &#x27;Interacting with the API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/best-practices"><span title="Best Practices" class="categoryLinkLabel_W154">Best Practices</span></a><button aria-label="Expand sidebar category &#x27;Best Practices&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/getting-started"><span>Getting Started</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/getting-started/setup-openfga/overview"><span>Setup OpenFGA</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Configure OpenFGA</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring OpenFGA</h1></header>
<p>Refer to the <a href="https://github.com/openfga/openfga?tab=readme-ov-file#getting-started" target="_blank" rel="noopener noreferrer" class="">OpenFGA Getting Started</a> for info on the various ways to install OpenFGA.</p>
<p>The instructions below assume OpenFGA is installed and that you have the <code>openfga</code> binary in your PATH. If you have built <code>openfga</code> as a binary, but not in your path, you can refer to it directly (e.g. replace <code>openfga</code> in the instructions below with <code>./openfga</code> or <code>/path/to/openfga</code>).</p>
<p>For a list of all the configuration options that the latest release of OpenFGA supports, see <a class="" href="/docs/getting-started/setup-openfga/configuration">Configuration Options</a>, or you can run <code>openfga --help</code> to see the ones specific to your version.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The instructions below are for configuring the standalone OpenFGA server. If you are using OpenFGA as a library, you can refer to the <a href="https://pkg.go.dev/github.com/openfga/openfga" target="_blank" rel="noopener noreferrer" class="">GoDoc</a> for more information.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-data-storage">Configuring data storage<a href="#configuring-data-storage" class="hash-link" aria-label="Direct link to Configuring data storage" title="Direct link to Configuring data storage" translate="no">‚Äã</a></h2>
<p>OpenFGA supports multiple storage engine options, including:</p>
<ul>
<li class=""><code>memory</code> - A memory storage engine, which is the default. Data is lost between server restarts.</li>
<li class=""><code>postgres</code> - A Postgres storage engine.</li>
<li class=""><code>mysql</code> - A MySQL storage engine.</li>
<li class=""><code>sqlite</code> - A SQLite storage engine.</li>
</ul>
<p>The first time you run OpenFGA, or when you install a new version, you need to run the <code>openfga migrate</code> command. This will create the required database tables or perform the database migration required for a new version.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="postgres">Postgres<a href="#postgres" class="hash-link" aria-label="Direct link to Postgres" title="Direct link to Postgres" translate="no">‚Äã</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga migrate </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine postgres </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;postgres://postgres:password@postgres:5432/postgres?sslmode=disable&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine postgres </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;postgres://postgres:password@postgres:5432/postgres?sslmode=disable&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="postgresql-read-replicas-configuration">PostgreSQL Read Replicas Configuration<a href="#postgresql-read-replicas-configuration" class="hash-link" aria-label="Direct link to PostgreSQL Read Replicas Configuration" title="Direct link to PostgreSQL Read Replicas Configuration" translate="no">‚Äã</a></h4>
<p>OpenFGA supports configuring separate read and write datastores for PostgreSQL to improve performance and scalability. This feature allows you to distribute read operations across read replicas while directing write operations to the primary database.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="setting-up-read-replicas">Setting Up Read Replicas<a href="#setting-up-read-replicas" class="hash-link" aria-label="Direct link to Setting Up Read Replicas" title="Direct link to Setting Up Read Replicas" translate="no">‚Äã</a></h5>
<p>To use read replicas, you need to configure both a primary datastore (for writes) and a secondary datastore (for reads):</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine postgres </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;postgres://postgres:password@primary:5432/postgres?sslmode=disable&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-secondary-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;postgres://postgres:password@replica:5432/postgres?sslmode=disable&#x27;</span><br></span></code></pre></div></div>
<p><strong>Important considerations:</strong></p>
<ul>
<li class="">The <code>--datastore-uri</code> parameter specifies the primary database (used for writes and high-consistency reads)</li>
<li class="">The <code>--datastore-secondary-uri</code> parameter specifies the read replica (used for regular read operations)</li>
<li class="">Both databases must have the same schema and should be kept in sync through PostgreSQL replication</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="synchronous-vs-asynchronous-replication">Synchronous vs Asynchronous Replication<a href="#synchronous-vs-asynchronous-replication" class="hash-link" aria-label="Direct link to Synchronous vs Asynchronous Replication" title="Direct link to Synchronous vs Asynchronous Replication" translate="no">‚Äã</a></h5>
<p>The choice between synchronous and asynchronous replication affects data consistency and performance:</p>
<p><strong>Synchronous Replication:</strong></p>
<ul>
<li class=""><strong>Pros:</strong> Guarantees data consistency across primary and replica</li>
<li class=""><strong>Cons:</strong> Higher latency for write operations</li>
<li class=""><strong>Use case:</strong> When data consistency is critical and you can tolerate slower writes</li>
<li class=""><strong>PostgreSQL config:</strong> <code>synchronous_commit = on</code> and <code>synchronous_standby_names = &#x27;replica_name&#x27;</code></li>
</ul>
<p><strong>Asynchronous Replication:</strong></p>
<ul>
<li class=""><strong>Pros:</strong> Better write performance, lower latency</li>
<li class=""><strong>Cons:</strong> Potential for read-after-write inconsistencies (replica lag)</li>
<li class=""><strong>Use case:</strong> When write performance is prioritized and slight delays in read consistency are acceptable</li>
<li class=""><strong>PostgreSQL config:</strong> <code>synchronous_commit = off</code> (default)</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="consistency-preferences">Consistency Preferences<a href="#consistency-preferences" class="hash-link" aria-label="Direct link to Consistency Preferences" title="Direct link to Consistency Preferences" translate="no">‚Äã</a></h5>
<p>OpenFGA provides consistency controls to handle read-after-write scenarios:</p>
<p><strong>Higher Consistency Mode:</strong>
When using <code>HIGHER_CONSISTENCY</code> preference in read operations, OpenFGA will automatically route the query to the primary database instead of the read replica, ensuring you get the most up-to-date data.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Example: Reading with higher consistency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> allowed </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fgaClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">  </span><span class="token literal-property property">user</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user:anne&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">relation</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;can_view&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">object</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;document:roadmap&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">  </span><span class="token literal-property property">consistency</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">ConsistencyPreference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">HigherConsistency</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<p><strong>Default Consistency Mode:</strong>
Regular read operations without the <code>HIGHER_CONSISTENCY</code> flag will be routed to the read replica for better performance.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices" translate="no">‚Äã</a></h5>
<ol>
<li class=""><strong>Monitor Replica Lag:</strong> Set up monitoring for replication lag between primary and replica</li>
<li class=""><strong>Use Higher Consistency Sparingly:</strong> Only use <code>HIGHER_CONSISTENCY</code> when you need immediate read-after-write consistency</li>
<li class=""><strong>Connection Pooling:</strong> Configure appropriate connection pools for both primary and replica connections</li>
</ol>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-postgresql-replication-setup">Example PostgreSQL Replication Setup<a href="#example-postgresql-replication-setup" class="hash-link" aria-label="Direct link to Example PostgreSQL Replication Setup" title="Direct link to Example PostgreSQL Replication Setup" translate="no">‚Äã</a></h5>
<p>Here&#x27;s a basic example of setting up PostgreSQL streaming replication:</p>
<p><strong>Primary server configuration (postgresql.conf):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wal_level = replica</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">max_wal_senders = 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wal_keep_size = 64MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">synchronous_commit = on  # for synchronous replication</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">synchronous_standby_names = &#x27;replica1&#x27;  # for synchronous replication</span><br></span></code></pre></div></div>
<p><strong>Primary server authentication (pg_hba.conf):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">host replication replicator replica_ip/32 md5</span><br></span></code></pre></div></div>
<p><strong>Replica server configuration (postgresql.conf):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hot_standby = on</span><br></span></code></pre></div></div>
<p><strong>Replica server recovery configuration:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">standby_mode = &#x27;on&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">primary_conninfo = &#x27;host=primary_ip port=5432 user=replicator&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This is a simplified example. For production setups, refer to the <a href="https://www.postgresql.org/docs/current/runtime-config-replication.html" target="_blank" rel="noopener noreferrer" class="">PostgreSQL documentation on replication</a> for comprehensive configuration guidelines.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>When using asynchronous replication, be aware that read replicas might have slightly outdated data due to replication lag. Use the <code>HIGHER_CONSISTENCY</code> preference for operations that require the most recent data.</p></div></div>
<p>To learn how to run in Docker, check our <a class="" href="/docs/getting-started/setup-openfga/docker#using-postgres">Docker documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mysql">MySQL<a href="#mysql" class="hash-link" aria-label="Direct link to MySQL" title="Direct link to MySQL" translate="no">‚Äã</a></h3>
<p>The MySQL datastore has stricter limits for the max length of some fields for tuples compared to other datastore engines, in particular:</p>
<ul>
<li class="">object type is at most 128 characters (down from 256)</li>
<li class="">object id is at most 255 characters (down from 256)</li>
<li class="">user is at most 256 characters (down from 512)</li>
</ul>
<p>The connection URI needs to specify the query <code>parseTime=true</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga migrate </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine mysql </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;root:secret@tcp(mysql:3306)/openfga?parseTime=true&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine mysql </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;root:secret@tcp(mysql:3306)/openfga?parseTime=true&#x27;</span><br></span></code></pre></div></div>
<p>To learn how to run in Docker, check our <a class="" href="/docs/getting-started/setup-openfga/docker#using-mysql">Docker documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sqlite">SQLite<a href="#sqlite" class="hash-link" aria-label="Direct link to SQLite" title="Direct link to SQLite" translate="no">‚Äã</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga migrate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine sqlite </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;file:/path/to/openfga.db&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-engine sqlite </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --datastore-uri </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;file:/path/to/openfga.db&#x27;</span><br></span></code></pre></div></div>
<p>To learn how to run in Docker, check our <a class="" href="/docs/getting-started/setup-openfga/docker#using-sqlite">Docker documentation</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-authentication">Configuring authentication<a href="#configuring-authentication" class="hash-link" aria-label="Direct link to Configuring authentication" title="Direct link to Configuring authentication" translate="no">‚Äã</a></h2>
<p>You can configure authentication in three ways:</p>
<ul>
<li class="">no authentication (default)</li>
<li class="">pre-shared key authentication</li>
<li class="">OIDC</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pre-shared-key-authentication">Pre-shared key authentication<a href="#pre-shared-key-authentication" class="hash-link" aria-label="Direct link to Pre-shared key authentication" title="Direct link to Pre-shared key authentication" translate="no">‚Äã</a></h3>
<p>If using <strong>Pre-shared key authentication</strong>, you will configure OpenFGA with one or more secret keys and your application calling OpenFGA will have to set an <code>Authorization: Bearer &lt;YOUR-KEY-HERE&gt;</code> header.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>If you are going to use this setup in production, you should enable HTTP TLS in your OpenFGA server. You will need to configure the TLS certificate and key.</p></div></div>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Configuration File</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Environment Variables</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Update the config.yaml file to</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">authn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> preshared</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">preshared</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">keys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;key1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;key2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /Users/myuser/key/server.crt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /Users/myuser/key/server.key</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ol>
<li class="">Configure the authentication method to preshared: <code>export OPENFGA_AUTHN_METHOD=preshared</code>.</li>
<li class="">Configure the authentication keys: <code>export OPENFGA_AUTHN_PRESHARED_KEYS=key1,key2</code></li>
<li class="">Enable the HTTP TLS configuration: <code>export OPENFGA_HTTP_TLS_ENABLED=true</code></li>
<li class="">Configure the HTTP TLS certificate location: <code>export OPENFGA_HTTP_TLS_CERT=/Users/myuser/key/server.crt</code></li>
<li class="">Configure the HTTP TLS key location: <code>export OPENFGA_HTTP_TLS_KEY=/Users/myuser/key/server.key</code></li>
</ol></div></div></div>
<p>To learn how to run in Docker, check our <a class="" href="/docs/getting-started/setup-openfga/docker#pre-shared-key-authentication">Docker documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="oidc">OIDC<a href="#oidc" class="hash-link" aria-label="Direct link to OIDC" title="Direct link to OIDC" translate="no">‚Äã</a></h3>
<p>To configure with OIDC authentication, you will first need to obtain the OIDC issuer and audience from your provider.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>If you are going to use this setup in production, you should enable HTTP TLS in your OpenFGA server. You will need to configure the TLS certificate and key.</p></div></div>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Configuration File</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Environment Variables</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Update the config.yaml file to</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">authn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> oidc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">oidc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">issuer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;oidc-issuer&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># required</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">issuerAliases</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;oidc-issuer-1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;oidc-issuer-2&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">audience</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;oidc-audience&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># required</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;valid-subject-1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;valid-subject-2&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /Users/myuser/key/server.crt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /Users/myuser/key/server.key</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ol>
<li class="">Configure the authentication method to OIDC: <code>export OPENFGA_AUTHN_METHOD=oidc</code>.</li>
<li class="">Configure the valid issuer (required): <code>export OPENFGA_AUTHN_OIDC_ISSUER=oidc-issuer</code></li>
<li class="">Configure the valid issuer aliases (optional): <code>export OPENFGA_AUTHN_OIDC_ISSUER_ALIASES=oidc-issuer-1,oidc-issuer-2</code></li>
<li class="">Configure the valid audience (required): <code>export OPENFGA_AUTHN_OIDC_AUDIENCE=oidc-audience</code></li>
<li class="">Configure the valid subjects (optional): <code>export OPENFGA_AUTHN_OIDC_SUBJECTS=oidc-subject-1,oidc-subject-2</code></li>
<li class="">Enable the HTTP TLS configuration: <code>export OPENFGA_HTTP_TLS_ENABLED=true</code></li>
<li class="">Configure the HTTP TLS certificate location:
<code>export OPENFGA_HTTP_TLS_CERT=/Users/myuser/key/server.crt</code></li>
<li class="">Configure the HTTP TLS key location:
<code>export OPENFGA_HTTP_TLS_KEY=/Users/myuser/key/server.key</code></li>
</ol></div></div></div>
<p>To learn how to run in Docker, check our <a class="" href="/docs/getting-started/setup-openfga/docker#oidc-authentication">Docker documentation</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="profiler-pprof">Profiler (pprof)<a href="#profiler-pprof" class="hash-link" aria-label="Direct link to Profiler (pprof)" title="Direct link to Profiler (pprof)" translate="no">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>Continuous profiling can be used in production deployments, but we recommend disabling it unless it is needed to troubleshoot specific performance or memory problems.</p></div></div>
<p>Profiling through <a href="https://github.com/google/pprof/blob/main/doc/README.md" target="_blank" rel="noopener noreferrer" class=""><code>pprof</code></a> can be enabled on the OpenFGA server by providing the <code>--profiler-enabled</code> flag. For example:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run --profiler-enabled</span><br></span></code></pre></div></div>
<p>If you need to serve the profiler on a different port than the default <code>3001</code>, you can do so by specifying the <code>--profiler-addr</code> flag. For example:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run --profiler-enabled --profiler-addr :3002</span><br></span></code></pre></div></div>
<p>If you want to run it in docker:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">8080</span><span class="token plain">:8080 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">8081</span><span class="token plain">:8081 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">3000</span><span class="token plain">:3000 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-p</span><span class="token plain"> </span><span class="token number">3002</span><span class="token plain">:3002 openfga/openfga run --profiler-enabled --profiler-addr :3002</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="health-check">Health check<a href="#health-check" class="hash-link" aria-label="Direct link to Health check" title="Direct link to Health check" translate="no">‚Äã</a></h2>
<p>OpenFGA is configured with an HTTP health check endpoint <code>/healthz</code> and a gRPC health check <code>grpc.health.v1.Health/Check</code>, which is wired to datastore testing. Possible response values are</p>
<ul>
<li class="">UNKNOWN</li>
<li class="">SERVING</li>
<li class="">NOT_SERVING</li>
<li class="">SERVICE_UNKNOWN</li>
</ul>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">cURL</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">gRPC</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-X</span><span class="token plain"> GET </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$FGA_API_URL</span><span class="token plain">/healthz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># {&quot;status&quot;:&quot;SERVING&quot;}</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># See https://github.com/fullstorydev/grpcurl#installation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">grpcurl </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-plaintext</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$FGA_API_URL</span><span class="token plain"> grpc.health.v1.Health/Check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># {&quot;status&quot;:&quot;SERVING&quot;}</span><br></span></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="experimental-features">Experimental features<a href="#experimental-features" class="hash-link" aria-label="Direct link to Experimental features" title="Direct link to Experimental features" translate="no">‚Äã</a></h2>
<p>Various releases of OpenFGA may have experimental features that can be enabled by providing the <a class="" href="/docs/getting-started/setup-openfga/configuration#OPENFGA_EXPERIMENTALS"><code>--experimentals</code></a> flag or the <code>experimentals</code> config.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run --experimentals=&quot;feature1, feature2&quot;</span><br></span></code></pre></div></div>
<p>or if you&#x27;re using environment variables,</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga -e OPENFGA_EXPERIMENTALS=&quot;feature1, feature2&quot; run</span><br></span></code></pre></div></div>
<p>The following table enumerates the experimental flags, a description of what they do, and the versions of OpenFGA the flag is supported in:</p>
<table><thead><tr><th>Name</th><th>Description</th><th>OpenFGA Version</th></tr></thead><tbody><tr><td>otel-metrics</td><td>Enables support for exposing OpenFGA metrics through OpenTelemetry</td><td><code>0.3.2 &lt;= v &lt; 0.3.5</code></td></tr><tr><td>list-objects</td><td>Enables ListObjects API</td><td><code>0.2.0 &lt;= v &lt; 0.3.3</code></td></tr><tr><td>check-query-cache</td><td>Enables caching of check subproblem result</td><td><code>1.3.1 &lt;= v &lt; 1.3.6</code></td></tr><tr><td>enable-conditions</td><td>Enables conditional relationship tuples</td><td><code>1.3.8 &lt;= v &lt; 1.4.0</code></td></tr><tr><td>enable-modular-models</td><td>Enables modular authorization modules</td><td><code>1.5.1 &lt;= v &lt; 1.5.3</code></td></tr><tr><td>enable-list-users</td><td>Enables new ListUsers API</td><td><code>1.5.4 &lt;= v &lt; 1.5.6</code></td></tr><tr><td>enable-consistency-params</td><td>Enables consistency options</td><td><code>1.5.6 &lt;= v &lt; 1.6.0</code></td></tr><tr><td>enable-check-optimizations</td><td>Enables performance optimization on Check</td><td><code>1.6.2 &lt;= v </code></td></tr><tr><td>enable-access-control</td><td>Enables the ability to configure and setup <a class="" href="/docs/getting-started/setup-openfga/access-control">access control</a></td><td><code>1.7.0 &lt;= v </code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>Experimental features are not guaranteed to be stable and may lead to server instabilities. It is not recommended to enable experimental features for anything other than experimentation.</p><p>Experimental feature flags are also not considered part of API compatibility and are subject to change, so please refer to each OpenFGA specific release for a list of the experimental feature flags that can be enabled for that release.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="telemetry">Telemetry<a href="#telemetry" class="hash-link" aria-label="Direct link to Telemetry" title="Direct link to Telemetry" translate="no">‚Äã</a></h2>
<p>OpenFGA telemetry data is collected by default starting on version <code>v0.3.5</code>. The telemetry information that is captured includes Metrics, Traces, and Logs.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Please refer to the <a href="https://github.com/openfga/openfga/blob/main/docker-compose.yaml" target="_blank" rel="noopener noreferrer" class="">docker-compose.yaml</a> file as an example of how to collect Metrics and Tracing in OpenFGA in a Docker environment using the <a href="https://opentelemetry.io/docs/collector/" target="_blank" rel="noopener noreferrer" class="">OpenTelemetry Collector</a>. This should serve as a good example that you can adjust for your specific deployment scenario.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="metrics">Metrics<a href="#metrics" class="hash-link" aria-label="Direct link to Metrics" title="Direct link to Metrics" translate="no">‚Äã</a></h2>
<p>OpenFGA metrics are collected with the <a href="https://prometheus.io/docs/concepts/data_model/" target="_blank" rel="noopener noreferrer" class="">Prometheus data format</a> and exposed on address <code>0.0.0.0:2112/metrics</code>.</p>
<p>Metrics are exposed by default, but you can disable this with <code>--metrics-enabled=false</code> (or <code>OPENFGA_METRICS_ENABLED=false</code> environment variable).</p>
<p>To set an alternative address, you can provide the <code>--metrics-addr</code> flag (<code>OPENFGA_METRICS_ADDR</code> environment variable). For example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openfga run --metrics-addr</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0:2114</span><br></span></code></pre></div></div>
<p>To see the request latency per endpoint of your OpenFGA deployment, you can provide the <code>--metrics-enable-rpc-histograms</code> flag (<code>OPENFGA_METRICS_ENABLE_RPC_HISTOGRAMS</code> environment variable).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tracing">Tracing<a href="#tracing" class="hash-link" aria-label="Direct link to Tracing" title="Direct link to Tracing" translate="no">‚Äã</a></h2>
<p>OpenFGA traces can be collected with the <a href="https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/otlp.md" target="_blank" rel="noopener noreferrer" class="">OTLP data format</a>.</p>
<p>Tracing is disabled by default, but you can enable this with the <code>--trace-enabled=true</code> (<code>OPENFGA_TRACE_ENABLED=true</code> environment variable). Traces will be exported by default to address <code>0.0.0.0:4317</code>. You can change this address with the <code>--trace-otlp-endpoint</code> flag (<code>OPENFGA_TRACE_OTLP_ENDPOINT</code> environment variable). In order to just correlate <code>trace_id</code> in logs if you are propagating tracing contexts into OpenFGA, exporter can be disabled by providing <code>none</code> as endpoint value.</p>
<p>To increase or decrease the trace sampling ratio, you can provide the <code>--trace-sample-ratio</code> flag (<code>OPENFGA_TRACE_SAMPLE_RATIO</code> env variable).</p>
<p>Tracing by default uses a insecure connection. You can enable TLS by using <code>--trace-otlp-tls-enabled=true</code> flag or the environment variable <code>OPENFGA_TRACE_OTLP_TLS_ENABLED</code>.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>It is not recommended to sample all traces (e.g. <code>--trace-sample-ratio=1</code>). You will need to adjust your sampling ratio based on the amount of traffic your deployment receives. Higher traffic will require less sampling and lower traffic can tolerate higher sampling ratios.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="logging">Logging<a href="#logging" class="hash-link" aria-label="Direct link to Logging" title="Direct link to Logging" translate="no">‚Äã</a></h2>
<p>OpenFGA generates structured logs by default, and it can be configured with the following flags:</p>
<ul>
<li class=""><code>--log-format</code>: sets the log format. Today we support <code>text</code> and <code>json</code> format.</li>
<li class=""><code>--log-level</code>: sets the minimum log level (defaults to <code>info</code>). It can be set to <code>none</code> to turn off logging.</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>It is highly recommended to enable logging in production environments. Disabling logging (<code>--log-level=none</code>) can mask important operations and hinder the ability to detect and diagnose issues, including potential security incidents. Ensure that logs are enabled and properly monitored to maintain visibility into the application&#x27;s behavior and security.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-sections">Related Sections<a href="#related-sections" class="hash-link" aria-label="Direct link to Related Sections" title="Direct link to Related Sections" translate="no">‚Äã</a></h2>
<div><div class="documentation-related-section-description_Un_N"><span>Check the following sections for more on how to use OpenFGA.</span></div><div class="column-layout-3_YXBy"><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Configuration Options</span><p class="documentation-card-box-description_u7_j">Find out all the different flags and options that OpenFGA accepts</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/docs/getting-started/setup-openfga/configuration">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div><div class="documentation-card-box_SNqO undefined undefined"><div class="documentation-card-box-content_Z5TD"><span class="documentation-card-box-title_sKX3">Running OpenFGA in Production</span><p class="documentation-card-box-description_u7_j">Learn the best practices of running OpenFGA in a production environment</p><div class="documentation-card-box-links_XUmL documentation-card-box-links-none_sQ2X"><ul><li><a class="documentation-card-box-link_yEiX" href="/docs/best-practices/running-in-production">More</a></li></ul></div><div class="documentation-card-box-children_i280"></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/openfga/openfga.dev/edit/main/docs/content/getting-started/setup-openfga/configure-openfga.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started/setup-openfga/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Setup OpenFGA</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/getting-started/setup-openfga/configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuration Options</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-data-storage" class="table-of-contents__link toc-highlight">Configuring data storage</a><ul><li><a href="#postgres" class="table-of-contents__link toc-highlight">Postgres</a></li><li><a href="#mysql" class="table-of-contents__link toc-highlight">MySQL</a></li><li><a href="#sqlite" class="table-of-contents__link toc-highlight">SQLite</a></li></ul></li><li><a href="#configuring-authentication" class="table-of-contents__link toc-highlight">Configuring authentication</a><ul><li><a href="#pre-shared-key-authentication" class="table-of-contents__link toc-highlight">Pre-shared key authentication</a></li><li><a href="#oidc" class="table-of-contents__link toc-highlight">OIDC</a></li></ul></li><li><a href="#profiler-pprof" class="table-of-contents__link toc-highlight">Profiler (pprof)</a></li><li><a href="#health-check" class="table-of-contents__link toc-highlight">Health check</a></li><li><a href="#experimental-features" class="table-of-contents__link toc-highlight">Experimental features</a></li><li><a href="#telemetry" class="table-of-contents__link toc-highlight">Telemetry</a></li><li><a href="#metrics" class="table-of-contents__link toc-highlight">Metrics</a></li><li><a href="#tracing" class="table-of-contents__link toc-highlight">Tracing</a></li><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a></li><li><a href="#related-sections" class="table-of-contents__link toc-highlight">Related Sections</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://twitter.com/OpenFGA" target="_blank" rel="noopener noreferrer" class="footer__link-item header-social header-twitter-link" aria-label="OpenFGA on Twitter">Twitter</a><span class="footer__link-separator">¬∑</span><a href="https://openfga.dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item header-social header-slack-link" aria-label="OpenFGA on Slack">CNCF Slack</a><span class="footer__link-separator">¬∑</span><a href="https://github.com/openfga" target="_blank" rel="noopener noreferrer" class="footer__link-item header-social header-github-link" aria-label="OpenFGA on GitHub">GitHub</a><span class="footer__link-separator">¬∑</span><a href="https://mastodon.social/@openfga" target="_blank" rel="me noopener noreferrer" class="footer__link-item header-social header-mastodon-link" aria-label="OpenFGA on Mastodon">Mastodon</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><a href="https://www.linuxfoundation.org/trademark-usage"><img src="/img/cncf-icon-white.svg" alt="CNCF" style="vertical-align:middle; margin-right:8px;"></a> &copy; 2026 <a href="https://www.linuxfoundation.org/" target="_blank">The Linux Foundation</a>¬Æ. All rights reserved. <span class="display-on-desktop">For a list of trademarks of The Linux Foundation, see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text" target="blank">Trademark Usage page</a>.</span></div></div></div></div></footer></div></div>
</body>
</html>